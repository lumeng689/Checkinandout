(function(t){function e(e){for(var n,r,o=e[0],l=e[1],c=e[2],u=0,m=[];u<o.length;u++)r=o[u],Object.prototype.hasOwnProperty.call(i,r)&&i[r]&&m.push(i[r][0]),i[r]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);d&&d(e);while(m.length)m.shift()();return s.push.apply(s,c||[]),a()}function a(){for(var t,e=0;e<s.length;e++){for(var a=s[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==i[l]&&(n=!1)}n&&(s.splice(e--,1),t=r(r.s=a[0]))}return t}var n={},i={app:0},s=[];function r(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=t,r.c=n,r.d=function(t,e,a){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(a,n,function(e){return t[e]}.bind(null,n));return a},r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var c=0;c<o.length;c++)e(o[c]);var d=l;s.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"034f":function(t,e,a){"use strict";a("85ec")},"0f58":function(t,e,a){},"0fbd":function(t,e,a){"use strict";a("74f0")},"150f":function(t,e,a){},"16d7":function(t,e,a){"use strict";a("0f58")},"180a":function(t,e,a){},"28bf":function(t,e,a){},4678:function(t,e,a){var n={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn-bd":"9686","./bn-bd.js":"9686","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-in":"ec2e","./en-in.js":"ec2e","./en-nz":"6f50","./en-nz.js":"6f50","./en-sg":"b7e9","./en-sg.js":"b7e9","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-mx":"b5b7","./es-mx.js":"b5b7","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fil":"d69a","./fil.js":"d69a","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-deva":"aaf2","./gom-deva.js":"aaf2","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./oc-lnc":"167b","./oc-lnc.js":"167b","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tk":"5aff","./tk.js":"5aff","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf755","./tlh.js":"cf755","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-mo":"3a6c","./zh-mo.js":"3a6c","./zh-tw":"90ea","./zh-tw.js":"90ea"};function i(t){var e=s(t);return a(e)}function s(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}i.keys=function(){return Object.keys(n)},i.resolve=s,t.exports=i,i.id="4678"},"4f32":function(t,e){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAALUAAAAeCAYAAABqiF+EAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAFxEAABcRAcom8z8AAAAhdEVYdENyZWF0aW9uIFRpbWUAMjAyMTowMjowMyAxNTo0MDozNAdOq38AAAxdSURBVHhe7ZwLkBxFGcd7dnb3uDuScJAQIEQDkvAoeYmAkZLjZfDFo0AC8lJQeRQvBbWIRDACFsVDCxBRlIgFKAQMZSmRGMjeJRrBRCySCHgQwAC55G6THOGR3OV2x9+/t3czezt7t5ci4UjNr+pLd3/f11/3zM709HTPxcTExMTExMTEbF08lw4Z8vn8R0mmIymrMOaJRCLxY5cfEOofTHJToVTGWuKc4fJbHfqlYzjY87yHkfsK2qEBfTuQ5HrkPeQSztNq6fuSbJ97uEklrrYFz9zcu9NR/7D5mOoEQeBxgmeRlqCcQz7lXAYE32Nd1TLQr3QuWx2a13GtLfQkaHHqIQN9u8z1TefpGKeuINkx9/5ktiWwsrplhlMPORIuHRJwTr/CKPZ5l39B55iy+ngP+eLIPRCL8T0Fme3KijWV5LxCKWYAqj69g0RiZmDMy5zPZUHOPOLUQ46KA6DDSWQC2THIdlaJGlmLvFh8NOHjI3uT3R2pkw7ySBdS8qsVYo1EnuciHkX6Hun+pFNIv+Hs1xJTj8iaYMS5m7oXKU/dZurOs4YQ6HX8Y0n3IB1ulcaswvefLl8CnxGIzstOSNQN1rNx48bOdDrdRrvvOJ1F7SBr0O9AuhTV9wuWqvQia5CX6IvSqnCc6s94pAlJSteHDUgH0kas9VbjoG4jyVHIifTtAunonwaAxco7NLC06pjccewvJeUliK6LEsTTdTAB/Wj86gvamlhM3/7n8hbqp5B9ye6KpK0SiP0S8qLJL6hPZTecyY3W6Odyj3ePPnaZc9kEAdJ06nokSz4SbL3I42SvJm0vaCvBpinDPORwF35A8P2tq67635Wuq6urifwKp1uP6CaqCXzvtsGA/JFOXQLdmch/nUuYLqT0BFNdRMfSWzD3D349uVzuL6Sap1pQh6cfNUMdncdnEPv0CoPuS8hCJO/c+wU3nb8/ILoBLOTPceZ+we+bzv94p5LuJBsEyI9FHkTedeZBQb3SqE/Rp3wdsqZgLQe9HXCSHS1XFqdCfmfL07ayozRS43wvd8D5rqjgGmk16mrU0F03GntxRC6BX5ZEfjmkAZGfvbOwaWT4JHfh8ypXg7YnUcdOF8g/i/9hlBVP5VPJP6o88eaTb0bKRogoqFd1pMamac7vXLF4rHoSqc3Xsak/OoGfoTyXvB0B8esh0aj3rsp9GIbsHPJ9m+RQ2tWNEx6p9TL2unz6oex8U0dPwJOJ9SeV6dcpJI9it78f9m6SVUjZSAyyq1+KZW9UfDtJDiRWO3F0s9+DNGHf2dnVN/WxBDfpJalU6in8w7/FucS4n7QJWYxeT2zp9duoLzp+9bsWHiSWfQrTxlRi2Tyh9Hu0I+HzncH3Yn91y2lcBQ9R1nE93DvyqPJFACqPIJgdiUiXkxyClE1NKDdgu1k+gvwbyCecuQSmvn4/caZIsDcirzjfHkSrF2Wgm2mDAfmLnbpf8Ks6UlOe7/RqTy+WZcdaBNsj8hPkp5Dopq0Kdp3Hn9oKQP52px/0i+Krr766XW9v76XUy6kSacaZwv3Xk/NCsqXHcxT4aEp3n+oIylOcyUI5/KJ4rFNXgO1U5ya/c6Qje0FBY3WPIbtZ582E+nonUizNGMY5dTSrMruk32oZTycqfz8CjFcgQb7qRYhNcyUL+XudugJsw52b/B5w6kjUnnOV781OXQb6MZg1LRBdKjtTVfDp76LWjSu95rdVwV68ePqd14bBdzhiL0SwKwSkm736QT29mKkPbU4V1r3gVAOC+zjVEdS7w6ktlDf7oib9gVNJVzHIDRZitLlYy0g2ayEjqpJ97EfBYyFsqzoFwK+mxw4dP5Tk8kLJsie6+/sK+ps4QD02xQjkLsqRo+sgqfXxWKtfzcc+CKr+HjCYtt7vfkUx4LSwBp7RP5zHPfmNn+b3vw3RHPvaCLkcmYTohbcclOGR+hanrgCzVigs+P3aqSvAvH3By/pFjtSY9GL6XMFr8FD3yy5UJNhrGanDb/kVYC+O1HpvqAnct8f//Ryp7cssadRI/R+nGhDcP6I6gnpbaqSumDoOFsLsQpxnChFrA/+1yFkuxAe3Tk1fruJuPMDldXH/sUbRy5q4g/wOLh+zjcA1sRKZyG/bjFyD/AyZHiG/QWYjG/DXdXAfF/am1TEKNY3UbW1tddhnIc8ik526AsL0O1Kj2xvZ4OwrkR2daUDwnWoDA/mqTwts8UgdAvcPxUg9WGjzfNe82v+6dIMaqSdMmNCd8LwTEp2tRyYSic3aJqVttXkPd1dxefAKYtX8IkY9rawUX/DO50COdvktQXFpS6samv8PCH07mj7a80o+vBRll9vQ7UMsu/w1EPhp82FsoWTCGzo2LrG0PqwNoQHBd5LLiqglyc0lvIwYbmNroSXnIvY9y/7DiRnPD2FHAg7+Vi4yu/nRl1Tn/EMC0zuXK2sYno/0jjz6dGcqgxjbk2idUnmtQZ5NG420cRblfUm/JRu6FdimkZ2OLty5qlBHI8lk/Is7YC+Tv4V0IbH+jX0M5S9iOhNpdj63kjyH3T418FmOj3YSl6CzU6Ao8LsQv18oj6/614q8hES9vGmXcT/kCOpoXVovTScS/88yEutO1Jcqj0kX1VzkDZmk64OPaJdTN0hxzX8qsW5UnljXof+h02uNWrFek0m6PmhX+AD87U2Jv3wmEqu0a0q8y7Db0Rv7cdiesoY+4Be1Tr0PonVqu8tK/jmSfyF918z7Yy6xZipDG/rdPq38AOja1fKh9hQaaFe/yUHEKQx4BNoLpYV85LKaSGUzXyt90JJtedOpKyBMxfSDVMtykWCreUsV34dctTLQX+PsA37QRP41p+t3+oGLpg03IuvlXyv4r0OucGEslOuRB5CadiaL4K+19DvJlrbAFy1alEL3c9kKXrWBfxY514UpgS48/aj65MMWnn6c7dTSn4SsdKZBQ92/ulCKtdCpa4Y6a5DSxqEdqdGnkdvI6juC27na7bJKBe2zG5N+3VWBZ0aZpPdYrqlZI0QFxEogN5D9GDKdeLNpVPPmX8neF+407fAVXwD7hThXkhxRKJXxe9p5FLu+TbCjGOhC0B2sUbMLu51z4XMR7R1DH2ejq7reXkR9R47Hdx+KOo6KnVXQyKSdSY0Uc/C1T6q+0KbmtseR3QvR8mTkdySIpmR6eiqWdugqoE/6LuKzSPHbj6hNGE2htByqG/hJYlWMoPRHo63eVdZj/w7n5i1nKoP2dsNmPwOWP7560lgo6xo6BvtBpKNRVS6zVYE6cxC7VU4bXyWJ+n3D6PfUcWl3dwnyVNRxxcTExMTExMTExMTExMTE9EvbrKgVjqHNh7HPW4AP7NuPLUoww69rb93DBIUlS0tH665mVUabQgVWzBplls3Rkpoxyx+uN9mnh5s3MyON+/ov0VQ/ueTfPrvRvJ7Z3WRnFf/kizYy25nsk2PMOupE4Gdbb7L2Ior15qIGYtmP8S0r5o0yq1vHms6/DTPtf9+kpw917Zlx5u2QTu1k6UMQaGPG4ndmbrDHFVxnf8dkU+N5ZsaMgl19zS4YY/tehHyqo+XgZGempm/SP6xskxd1Ys2o03Kp/A3pznn2T5dS7ZmPJ73c9KSfeNA6gJ9u+JE/Il34c7OGYSnfvDfFTyemuqV7k/DM7ibfYz+l9NN1zX594lI/aCh9a+6vNrcm88lT/R7ve05Vhmfyh/lechoXrP1o3ve9Sb6/bqKfrNPfAFr8dH5aMp8/Pen1/jKZ3HiXWbTIrlkns5kLcinvpOSGHv1XERa/OzE1mTMnJ7Mt33Yqre9O9L3gYuNNszuJQZAfZyZPtrudCdNwctJ0n+f7Ke2mWvxk+o4g4X2Og9Nfw2yzbJsXdU/uFX7yIBfk9lTZS3k5rgBtZixU2fF2bmRzYSdr5BfWGS9R55mgnasx+pvgIP8Etk3fqARe3viRGyeWIG+eZ8Cdnzbd9gLycvlVxvdO8DzzEetQ4J3e9d1cuMESYi81uxbieZ7fSy+Kf/RcwAt6ers77qVz2mQpYLeGN43cfUkYfybBwn+aRfWa/yo/ZkihKcSqzC5l04+u+U1lc87wY1ksX1Bvls7YtCOXp+ymIlYfMIqG6iQ6MmckO1uuSmZb7fccFWi6kW+r01TIaYx5Y85OZVMgxVMbaktTk2J7Yh1TkyjfAL8ismvqUqwXPqZi22FdsDRtuhbsaNuLiakgP6sunZ23X9mFGDMEMOb/syPo/1xXCOUAAAAASUVORK5CYII="},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n,i=a("2b0e"),s=a("2f62"),r=a("bfa9"),o=a("5f5b"),l=a("b1e0"),c=a("8c4f"),d=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("router-view")],1)},u=[],m={name:"App",created:function(){}},h=m,p=(a("034f"),a("2877")),f=Object(p["a"])(h,d,u,!1,null,null,null),b=f.exports,g=(a("ab8b"),a("2dd8"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-navbar",{attrs:{sticky:"",type:"dark",variant:"dark"}},[n("b-navbar-brand",{attrs:{href:"#"}},[n("img",{staticClass:"mr-2",attrs:{src:a("4f32"),alt:""}}),t._v(" Check Me! ")]),n("b-navbar-nav",{staticClass:"ml-auto"},[n("b-nav-item-dropdown",{attrs:{right:""},scopedSlots:t._u([{key:"button-content",fn:function(){return[n("em",[t._v(t._s(t.frasUsername))])]},proxy:!0}])},[n("b-dropdown-item",{attrs:{to:"/portal/profile"}},[t._v("Profile")]),n("b-dropdown-item",{attrs:{to:"/portal/settings"}},[t._v("Settings")]),n("b-dropdown-item",{attrs:{href:"/user-login"}},[t._v("Sign Out")])],1)],1)],1),n("div",{staticClass:"cc-sidebar"},[t.useFamilySchoolSidebar?n("family-school-sidebar"):t._e(),t.useMemberCorporateSidebar?n("member-corporate-sidebar"):t._e(),t.useMemberHospitalSidebar?n("member-hospital-sidebar"):t._e(),t.useTagCorporateSidebar?n("tag-corporate-sidebar"):t._e()],1),n("div",{staticClass:"cc-content"},[t.activeUserLoaded?n("router-view"):t._e()],1)],1)}),v=[],y=a("f121"),_=a.n(y),T=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-nav",{attrs:{vertical:""}},[a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/cc-records"}},[t._v("CC Records")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/wards"}},[t._v("Students")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/families/dashboard"}},[t._v("Families")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/admins"}},[t._v("Admins")])],1)},C=[],I={name:"family-school-sidebar"},w=I,x=Object(p["a"])(w,T,C,!1,null,null,null),k=x.exports,S=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-nav",{attrs:{vertical:""}},[a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/cc-records"}},[t._v("Records")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/members/dashboard/0"}},[t._v("Employees")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/admins"}},[t._v("Admins")])],1)},A=[],R={name:"member-corporate-sidebar"},M=R,F=Object(p["a"])(M,S,A,!1,null,null,null),D=F.exports,O=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-nav",{attrs:{vertical:""}},[a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/cc-records"}},[t._v("Records")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/members/dashboard"}},[t._v("Patients")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/admins"}},[t._v("Admins")])],1)},N=[],E={name:"member-hospital-sidebar"},P=E,L=Object(p["a"])(P,O,N,!1,null,null,null),j=L.exports,B=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-nav",{attrs:{vertical:""}},[a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/cc-records"}},[t._v("Records")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/tags/dashboard"}},[t._v("Employees")]),a("b-nav-item",{staticClass:"cc-sidebar-item",attrs:{active:"",to:"/portal/admins"}},[t._v("Admins")])],1)},q=[],H={name:"tag-corporate-sidebar"},$=H,U=Object(p["a"])($,B,q,!1,null,null,null),W=U.exports,z=a("72bf"),X={name:"CCPortal",components:{"family-school-sidebar":k,"member-corporate-sidebar":D,"member-hospital-sidebar":j,"tag-corporate-sidebar":W},data:function(){return{frasUsername:_.a.FRAS_USERNAME,activeUser:null,institution:null,activeUserLoaded:!1,loggedInToken:""}},computed:{activeInstitutionId:function(){return null===this.activeUser?"":this.activeUser.institution_id},useFamilySchoolSidebar:function(){return null!==this.institution&&("school"===this.institution.type&&"guardian"===this.institution.member_type)},useMemberCorporateSidebar:function(){return null!==this.institution&&("corporate"===this.institution.type&&"standard"===this.institution.member_type)},useMemberHospitalSidebar:function(){return null!==this.institution&&("hospital"===this.institution.type&&"standard"===this.institution.member_type)},useTagCorporateSidebar:function(){return null!==this.institution&&("corporate"===this.institution.type&&"tag"===this.institution.member_type)}},mounted:function(){if(this.activeUser=this.$store.state.activeUser,this.institution=this.$store.state.institution,this.loggedInToken=this.$store.state.loggedInToken,null!=this.activeUser&&null!=this.institution)return this.frasUsername=this.activeUser.fras_username,void(this.activeUserLoaded=!0);var t=this;this.getActiveUserFromDb(this.frasUsername,(function(e){t.activeUser=e,t.$store.commit("setActiveUser",e),t.getInstitutionFromDb(e.institution_id,(function(e){t.institution=e,t.$store.commit("setInstitution",e),t.activeUserLoaded=!0,t.institution=e}))}))},methods:{getActiveUserFromDb:function(t,e){var a=new XMLHttpRequest,n={frasUsername:t},i=z.stringify(n),s=_.a.API_LOCATION+"admin?"+i;a.open("GET",s,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){if(0===this.responseText.length)return;var t=JSON.parse(this.responseText).data;e(t)}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(r){alert(r)}},getInstitutionFromDb:function(t,e){var a=new XMLHttpRequest,n=_.a.API_LOCATION+"institution/"+t;a.open("GET",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){if(0==this.responseText.length)return;var t=JSON.parse(this.responseText).data;e(t)}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(i){alert(i)}}}},G=X,J=(a("9a34"),Object(p["a"])(G,g,v,!1,null,null,null)),Y=J.exports,V=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"},attrs:{"align-h":"between"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Login to Check-InNOut Portal")])])],1),a("b-row",{staticClass:"ml-4 mr-4"},[a("b-col",{attrs:{lg:"4"}},[a("b-form",{on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Username","label-align":"left","label-for":"username-input"}},[a("b-form-input",{staticClass:"mb-4",attrs:{id:"username-input",placeholder:"Enter Username",required:""},model:{value:t.form.frasUsername,callback:function(e){t.$set(t.form,"frasUsername",e)},expression:"form.frasUsername"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Password","label-align":"left","label-for":"password-input"}},[a("b-form-input",{staticClass:"mb-4",attrs:{id:"password-input",type:"password",placeholder:"Enter Password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Login")])],1)],1)],1)],1)},K=[],Q={name:"CCPortalLogin",data:function(){return{form:{frasUsername:"",password:""}}},methods:{onSubmit:function(t){var e=this;t.preventDefault(),this.logInAdminByDb((function(t){var a=t.data,n=t.token;e.getInstitutionByIdFromDb(a.institution_id,(function(t){e.$store.commit("setInstitution",t),e.$store.commit("setActiveUser",a),e.$store.commit("setLoggedInToken",n),e.$router.push("/portal/cc-records")}))}))},logInAdminByDb:function(t){var e=_.a.API_LOCATION+"admin/login",a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){var e=JSON.parse(this.responseText);if(4===this.readyState&&200===this.status){if(0==this.responseText.length)return;e.data&&null!=t&&t(e)}else 4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify({fras_username:this.form.frasUsername,password:this.form.password}))}catch(n){alert(n)}},getInstitutionByIdFromDb:function(t,e){var a=_.a.API_LOCATION+"institution/"+t,n=new XMLHttpRequest;n.open("GET",a,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.responseText).data;t&&null!=e&&e(t)}else 4===this.readyState&&alert(this.responseText)};try{n.send()}catch(i){alert(i)}}}},Z=Q,tt=Object(p["a"])(Z,V,K,!1,null,null,null),et=tt.exports,at=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100 ml-2 mr-2",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("h2",[t._v("Dashboard")])]),a("b-row",{staticClass:"ml-2"},[a("b-alert",{attrs:{variant:"success",show:t.dismissCountDown,dismissible:""},on:{dismissed:function(e){t.dismissCountDown=0},"dismiss-count-down":t.countDownChanged}},[t._v(" # of Scan Records Today: "),a("b",[t._v(t._s(t.numTodayRecords))])])],1),a("b-card",{staticClass:"h-100"},[a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-row",[a("b-col",{attrs:{xl:"8",lg:"10"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Select A Date Range","label-for":"sort-by-select","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-datepicker",{staticClass:"ml-2",attrs:{id:"datepicker-start",placeholder:"Choose a Start Date","date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:"en"},model:{value:t.startDate,callback:function(e){t.startDate=e},expression:"startDate"}}),a("p",{staticClass:"ml-2"},[t._v("to")]),a("b-form-datepicker",{staticClass:"ml-2",attrs:{id:"datepicker-end",placeholder:"Choose a End Date","date-format-options":{year:"numeric",month:"numeric",day:"numeric"},locale:"en"},model:{value:t.endDate,callback:function(e){t.endDate=e},expression:"endDate"}}),a("b-button",{staticClass:"ml-2",attrs:{variant:"primary",disabled:!t.hasDateRanges},on:{click:t.onApplyDateRangeFilter}},[t._v("Filter")])],1)],1)],1)],1),t.useFamilyTable?a("family-table",{attrs:{ccRecords:t.ccRecords}}):t._e(),t.useMemberTable?a("member-table",{attrs:{ccRecords:t.ccRecords,instType:t.instType}}):t._e(),t.useTagTable?a("tag-table",{attrs:{ccRecords:t.ccRecords}}):t._e()],1)],1)],1)},nt=[],it=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Group","label-for":"group-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"group-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.groupFilter,callback:function(e){t.groupFilter=e},expression:"groupFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"3",lg:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Temp Threshold","label-for":"temp-threshold-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-form-checkbox",{model:{value:t.enableTempThrdFilter,callback:function(e){t.enableTempThrdFilter=e},expression:"enableTempThrdFilter"}})],1),a("b-form-input",{attrs:{type:"number",step:"0.1",id:"temp-threshold-filter-input",placeholder:"99.2"},model:{value:t.tempThrdFilter,callback:function(e){t.tempThrdFilter=e},expression:"tempThrdFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Include Expired","label-for":"temp-threshold-filter-input","label-cols-sm":"8","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-checkbox",{attrs:{id:"include-expired-filter-input"},model:{value:t.includeExpiredFilter,callback:function(e){t.includeExpiredFilter=e},expression:"includeExpiredFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"5",lg:"12","align-self":"end"}},[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"info",disabled:t.disableSingleAction},on:{click:t.onViewFamily}},[t._v("View Family")]),t._e(),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"danger",disabled:t.disableManyAction},on:{click:t.onDeleteEvents}},[t._v("Delete")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"outline-secondary",disabled:t.disableManyAction},on:{click:t.onClearSelect}},[t._v("Clear Select")])],1)],1)],1),a("b-table",{ref:"ccRecordTable",attrs:{bordered:"","sticky-header":"80%",selectable:"",id:"cc-record-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"filter-function":t.filterFunction},on:{"row-selected":t.onRowSelected,filtered:t.onFiltered}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"cc-record-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},st=[],rt=(a("caad"),a("d81d"),a("b0c0"),a("b680"),a("2532"),a("72bf")),ot=a("c1df"),lt="MM/DD/YYYY",ct="hh:mm A",dt={name:"family-table",props:{ccRecords:Array},data:function(){return{institution:null,loggedInToken:"",currentPage:1,perPage:20,items:[],selectedItems:[],groupFilter:"",tempThrdFilter:"99.2",enableTempThrdFilter:!1,includeExpiredFilter:!1,filterOn:["group","temperature"]}},computed:{fields:function(){return null!=this.institution&&"cc"===this.institution.workflow_type?["date","student_name","group","guardian_name","temperature","phone_number","drop_off","scheduled_pickup","actual_pickup"]:["time","student_name","group","guardian_name","temperature","phone_number"]},disableSingleAction:function(){return 1!=this.selectedItems.length},disableManyAction:function(){return 0==this.selectedItems.length},disableCheckout:function(){return!0},numRows:function(){return this.items.length},filter:function(){return this.groupFilter+" "+this.tempThrdFilter}},created:function(){this.institution=this.$store.state.institution,this.loggedInToken=this.$store.state.loggedInToken},methods:{mapCCRecordToItem:function(t){if(null===t.gw)return{_id:t._id,self:t,date:"",time:"",has_expired:"",student_name:"",group:"",guardian_name:"",temperature:"",phone_number:"",drop_off:"",scheduled_pickup:"",actual_pickup:""};var e=ot(t.gw.check_in_event.time),a=ot(t.check_out_scheduled_at),n=ot(t.gw.check_out_event.time),i=e.isBefore("1970-01-01")?"":e.format(ct),s=a.isBefore("1970-01-01")?"":a.format(ct),r=n.isBefore("1970-01-01")?"":n.format(ct),o={_id:t._id,self:t,date:e.format(lt),time:e.format(lt)+i,has_expired:t.has_expired,student_name:t.gw.ward_info.name,group:t.gw.ward_info.group,guardian_name:t.gw.check_in_event.guardian_info.name,temperature:t.temperature.toFixed(1),phone_number:t.gw.check_in_event.guardian_info.phone_num,drop_off:i,scheduled_pickup:s,actual_pickup:r};return o.temperature>parseFloat(this.tempThrdFilter)&&(o._rowVariant="danger"),o},onRowSelected:function(t){void 0!==t[0]&&(this.selectedItems=t)},onViewFamily:function(){var t=this,e=this.selectedItems[0].self.gw.ward_info.id;this.getFamilyWithMemberByWardID(e,(function(e){t.$store.commit("setLoadedFamilyWithMembers",e),t.$router.push("/portal/families/info")}))},onCheckOutEventes:function(){},onDeleteEvents:function(){},onClearSelect:function(){this.selectedItems=[],this.$refs.ccRecordTable.clearSelected()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1,this.onClearSelect()},filterFunction:function(t){var e=!1;this.includeExpiredFilter||(e=t.has_expired);var a=!0;this.enableTempThrdFilter&&(a=!1,this.tempThrdFilter.length>0&&(a=t.temperature>parseFloat(this.tempThrdFilter)));var n=!0;return this.groupFilter.length>0&&(n=t.group.toLowerCase().includes(this.groupFilter)),!e&&a&&n},getFamilyWithMemberByWardID:function(t,e){var a={wardID:t},n=rt.stringify(a),i=new XMLHttpRequest,s=_.a.API_LOCATION+"family-with-members?"+n;i.open("GET",s,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),i.onreadystatechange=function(){if(4===this.readyState&&200===this.status){if(0==this.responseText.length)return;var t=JSON.parse(this.responseText).data;t&&null!=e&&e(t)}else 4===this.readyState&&alert(this.responseText)};try{i.send()}catch(r){alert(r)}}},watch:{ccRecords:function(){var t=this;this.onClearSelect(),this.ccRecords&&(this.items=this.ccRecords.map((function(e){return t.mapCCRecordToItem(e)})))}}},ut=dt,mt=Object(p["a"])(ut,it,st,!1,null,null,null),ht=mt.exports,pt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Group","label-for":"group-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"group-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.groupFilter,callback:function(e){t.groupFilter=e},expression:"groupFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"3",lg:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Temp Threshold","label-for":"temp-threshold-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-form-checkbox",{model:{value:t.enableTempThrdFilter,callback:function(e){t.enableTempThrdFilter=e},expression:"enableTempThrdFilter"}})],1),a("b-form-input",{attrs:{type:"number",step:"0.1",id:"temp-threshold-filter-input",placeholder:"99.2"},model:{value:t.tempThrdFilter,callback:function(e){t.tempThrdFilter=e},expression:"tempThrdFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Include Expired","label-for":"temp-threshold-filter-input","label-cols-sm":"8","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-checkbox",{attrs:{id:"include-expired-filter-input"},model:{value:t.includeExpiredFilter,callback:function(e){t.includeExpiredFilter=e},expression:"includeExpiredFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"5",lg:"12","align-self":"end"}},[a("b-row",{attrs:{"align-h":"end"}},[t._e(),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"danger",disabled:t.disableManyAction},on:{click:t.onDeleteEvents}},[t._v("Delete")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"outline-secondary",disabled:t.disableManyAction},on:{click:t.onClearSelect}},[t._v("Clear Select")])],1)],1)],1),a("b-table",{ref:"ccRecordTable",attrs:{bordered:"","sticky-header":"80%",selectable:"",id:"cc-record-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"filter-function":t.filterFunction},on:{"row-selected":t.onRowSelected,filtered:t.onFiltered}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"cc-record-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},ft=[],bt=a("c1df"),gt="MM/DD/YYYY",vt="hh:mm A",yt={name:"member-table",props:{ccRecords:Array,instType:String},data:function(){return{institution:null,loggedInToken:"",currentPage:1,perPage:20,items:[],selectedItems:[],groupFilter:"",tempThrdFilter:"99.2",enableTempThrdFilter:!1,includeExpiredFilter:!1,filterOn:["group","temperature"]}},computed:{fields:function(){var t="hospital"===this.instType?"patient":"employee";return null!=this.institution&&"cc"===this.institution.workflow_type?["date",t,"group","temperature","phone_number","check_in","check_out"]:["time",t,"group","temperature","phone_number"]},disableSingleAction:function(){return 1!=this.selectedItems.length},disableManyAction:function(){return 0==this.selectedItems.length},disableCheckout:function(){return!0},numRows:function(){return this.items.length},filter:function(){return this.groupFilter+" "+this.tempThrdFilter}},created:function(){this.institution=this.$store.state.institution,this.loggedInToken=this.$store.state.loggedInToken},methods:{mapCCRecordToItem:function(t){var e;if(null===t.mt)return e={_id:t._id,has_expired:t.has_expired,temperature:t.temperature.toFix},"hospital"===this.instType?e.patient="":e.employee="",e;var a=bt(t.mt.check_in_event.time),n=bt(t.mt.check_out_event.time),i=a.isBefore("1970-01-01")?"":a.format(vt),s=n.isBefore("1970-01-01")?"":n.format(vt);return e={_id:t._id,date:a.format(gt),time:a.format(gt)+" "+i,has_expired:t.has_expired,group:t.mt.info.group,temperature:t.temperature.toFixed(1),phone_number:t.mt.info.phone_num,check_in:i,check_out:s},"hospital"===this.instType?e.patient=t.mt.info.name:e.employee=t.mt.info.name,e.temperature>parseFloat(this.tempThrdFilter)&&(e._rowVariant="danger"),e},onRowSelected:function(t){void 0!==t[0]&&(this.selectedItems=t)},onCheckOutEvents:function(){},onDeleteEvents:function(){},onClearSelect:function(){this.selectedItems=[],this.$refs.ccRecordTable.clearSelected()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1,this.onClearSelect()},filterFunction:function(t){var e=!1;this.includeExpiredFilter||(e=t.has_expired);var a=!0;this.enableTempThrdFilter&&(a=!1,this.tempThrdFilter.length>0&&(a=t.temperature>parseFloat(this.tempThrdFilter)));var n=!0;return this.groupFilter.length>0&&(n=t.group.toLowerCase().includes(this.wardGroupFilter)),!e&&a&&n}},watch:{ccRecords:function(){var t=this;this.onClearSelect(),this.ccRecords&&(this.items=this.ccRecords.map((function(e){return t.mapCCRecordToItem(e)})))}}},_t=yt,Tt=Object(p["a"])(_t,pt,ft,!1,null,null,null),Ct=Tt.exports,It=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Group","label-for":"group-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"group-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.groupFilter,callback:function(e){t.groupFilter=e},expression:"groupFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"3",lg:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Temp Threshold","label-for":"temp-threshold-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-input-group-prepend",[a("b-form-checkbox",{model:{value:t.enableTempThrdFilter,callback:function(e){t.enableTempThrdFilter=e},expression:"enableTempThrdFilter"}})],1),a("b-form-input",{attrs:{type:"number",step:"0.1",id:"temp-threshold-filter-input",placeholder:"99.2"},model:{value:t.tempThrdFilter,callback:function(e){t.tempThrdFilter=e},expression:"tempThrdFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Include Expired","label-for":"temp-threshold-filter-input","label-cols-sm":"8","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-checkbox",{attrs:{id:"include-expired-filter-input"},model:{value:t.includeExpiredFilter,callback:function(e){t.includeExpiredFilter=e},expression:"includeExpiredFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"5",lg:"12","align-self":"end"}},[a("b-row",{attrs:{"align-h":"end"}},[t._e(),t._e(),t._e()],1)],1)],1),a("b-table",{ref:"ccRecordTable",attrs:{bordered:"","sticky-header":"80%",selectable:"",id:"cc-record-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"filter-function":t.filterFunction},on:{"row-selected":t.onRowSelected,filtered:t.onFiltered}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"cc-record-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)},wt=[],xt=a("72bf"),kt=a("c1df"),St="MM/DD/YYYY",At="hh:mm A",Rt={name:"tag-table",props:{ccRecords:Array},data:function(){var t=this.getNewTagModalItem();return{institution:null,loggedInToken:"",currentPage:1,perPage:20,items:[],selectedItems:[],groupFilter:"",tempThrdFilter:"99.2",enableTempThrdFilter:!1,includeExpiredFilter:!1,filterOn:["group","temperature"],tModalItem:t}},computed:{fields:function(){return null!=this.institution&&"cc"===this.institution.workflow_type?["date","tag_number","employee","group","temperature","phone_number","check_in","check_out"]:["time","tag_number","employee","group","temperature","phone_number"]},disableSingleAction:function(){return 1!=this.selectedItems.length},disableManyAction:function(){return 0==this.selectedItems.length},disableCheckout:function(){return!0},numRows:function(){return this.items.length},filter:function(){return this.groupFilter+" "+this.tempThrdFilter}},created:function(){this.institution=this.$store.state.institution,this.loggedInToken=this.$store.state.loggedInToken},methods:{mapCCRecordToItem:function(t){if(null===t.mt)return{_id:t._id,date:"",time:"",has_expired:"",tag_number:"",employee:"",group:"",temperature:"",phone_number:"",check_in:"",check_out:""};var e=kt(t.mt.check_in_event.time),a=kt(t.mt.check_out_event.time),n=e.isBefore("1970-01-01")?"":e.format(At),i=a.isBefore("1970-01-01")?"":a.format(At),s={_id:t._id,date:e.format(St),time:e.format(St)+" "+n,has_expired:t.has_expired,tag_number:t.mt.info.id,employee:t.mt.info.name,group:t.mt.info.group,temperature:t.temperature.toFixed(1),phone_number:t.mt.info.phone_num,check_in:n,check_out:i};return s.temperature>parseFloat(this.tempThrdFilter)&&(s._rowVariant="danger"),s},onRowSelected:function(t){void 0!==t[0]&&(this.selectedItems=t)},onEditTag:function(){var t=this;this.getTagByTagStringFromDb((function(e){t.tModalItem=e}))},onCheckOutEvents:function(){},onDeleteEvents:function(){},onClearSelect:function(){this.selectedItems=[],this.$refs.ccRecordTable.clearSelected()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1,this.onClearSelect()},filterFunction:function(t){var e=!1;this.includeExpiredFilter||(e=t.has_expired);var a=!0;this.enableTempThrdFilter&&(a=!1,this.tempThrdFilter.length>0&&(a=t.temperature>parseFloat(this.tempThrdFilter)));var n=!0;return this.groupFilter.length>0&&(n=t.group.toLowerCase().includes(this.groupFilter)),!e&&a&&n},getTagByTagStringFromDb:function(t){var e=this.selectedItems[0],a={tagString:e.mt.info.id},n=xt.stringify(a),i=new XMLHttpRequest,s=_.a.API_LOCATION+"tag?"+n;i.open("GET",s,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),i.onreadystatechange=function(){if(4===this.readyState&&200===this.status){if(0==this.responseText.length)return;var e=JSON.parse(this.responseText).data;e&&null!=t&&t(e)}else 4===this.readyState&&alert(this.responseText)};try{i.send()}catch(r){alert(r)}},getNewTagModalItem:function(){return{tag_string:"",first_name:"",last_name:"",group:"",email:""}}},watch:{ccRecords:function(){var t=this;this.onClearSelect(),this.ccRecords&&(this.items=this.ccRecords.map((function(e){return t.mapCCRecordToItem(e)})))}}},Mt=Rt,Ft=Object(p["a"])(Mt,It,wt,!1,null,null,null),Dt=Ft.exports,Ot=a("72bf"),Nt=a("c1df"),Et="YYYY-MM-DD",Pt={name:"CCRecords",components:{"tag-table":Dt,"member-table":Ct,"family-table":ht},data:function(){return{institution:null,loggedInToken:"",ccRecords:[],startDate:"",endDate:"",numTodayRecords:0,dismissSecs:5,dismissCountDown:0}},mounted:function(){this.startDate=Nt().format(Et),this.endDate=Nt().format(Et);var t=this.$store.state.institution;null!=t&&(this.institution=t),this.loggedInToken=this.$store.state.loggedInToken;var e=this;this.getCCRecordsFromDb((function(t){e.showAlert(),e.numTodayRecords=t.length}))},computed:{hasDateRanges:function(){return this.startDate.length>0&&this.endDate.length>0},useFamilyTable:function(){return null!==this.institution&&"guardian"===this.institution.member_type},useMemberTable:function(){return null!==this.institution&&"standard"===this.institution.member_type},useTagTable:function(){return null!==this.institution&&"tag"===this.institution.member_type},instType:function(){return null===this.institution?"corporate":this.institution.type}},methods:{countDownChanged:function(t){this.dismissCountDown=t},showAlert:function(){this.dismissCountDown=this.dismissSecs},onApplyDateRangeFilter:function(){this.currentPage=1,this.getCCRecordsFromDb(null)},getCCRecordsFromDb:function(){var t=this,e={instID:this.institution._id};this.startDate.length>0&&(e.startDate=Nt(this.startDate).hour(0).minute(0).second(0).format()),this.endDate.length>0&&(e.endDate=Nt(this.endDate).hour(23).minute(59).second(59).format());var a=Ot.stringify(e),n=new XMLHttpRequest,i=_.a.API_LOCATION+"cc-records?"+a;n.open("GET",i,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){4===this.readyState&&200===this.status?t.ccRecords=JSON.parse(this.responseText).data:4===this.readyState&&alert(this.responseText)};try{n.send()}catch(s){alert(s)}},deleteCCRecordFromDb:function(t){var e=this,a=new XMLHttpRequest,n=_.a.API_LOCATION+"cc-record/"+t._id;a.open("DELETE",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.responseText);void 0!=t.message&&e.$bvToast.toast(t.message,{title:"DataBase Message",autoHideDelay:2e3})}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(i){alert(i)}}}},Lt=Pt,jt=Object(p["a"])(Lt,at,nt,!1,null,null,null),Bt=jt.exports,qt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100 ml-2 mr-2",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"},attrs:{"align-h":"between"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Tags Dashboard")])]),a("b-col",{attrs:{xl:"2",md:"4"}},[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.onOpenTagImportModal()}}},[t._v("Import Tags")])],1)],1),a("b-card",{staticClass:"h-100 ml-4 mr-4"},[a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{xl:"3",lg:"4"}},[a("b-form-group",{attrs:{label:"Contact Name","label-for":"contact-name-filter-input","label-cols-sm":"4","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"contact-name-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.nameFilter,callback:function(e){t.nameFilter=e},expression:"nameFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"7",lg:"12","align-self":"end"}},[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"info",disabled:t.disableSingleAction},on:{click:t.onEditSelected}},[t._v("Edit")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"danger",disabled:t.disableManyAction},on:{click:t.onDeleteSelected}},[t._v("Delete")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"outline-secondary",disabled:t.disableManyAction},on:{click:t.onClearSelect}},[t._v("Clear Select")])],1)],1)],1),a("b-table",{ref:"dashboardTable",attrs:{bordered:"","sticky-header":"80%",selectable:"",id:"dashboard-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-function":t.filterFunction,"filter-included-fields":t.filterOn},on:{"row-selected":t.onRowSelected,filtered:t.onFiltered}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"dashboard-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),a("b-modal",{ref:"edit-modal",attrs:{"hide-footer":"",title:"Edit Tag"}},[a("div",{staticClass:"d-block text-left"},[a("h3",[t._v("Update Tag")]),a("b-form",[a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"First Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tag-input-first-name'",placeholder:"???"},model:{value:t.modalItem.first_name,callback:function(e){t.$set(t.modalItem,"first_name",e)},expression:"modalItem.first_name"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Last Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tag-input-last-name'",placeholder:"???"},model:{value:t.modalItem.last_name,callback:function(e){t.$set(t.modalItem,"last_name",e)},expression:"modalItem.last_name"}})],1)],1)],1),a("b-input-group",{staticClass:"mb-2",attrs:{prepend:"Email"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tag-input-email",placeholder:"???"},model:{value:t.modalItem.email,callback:function(e){t.$set(t.modalItem,"email",e)},expression:"modalItem.email"}})],1),a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Phone #"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tag-input-phone-number",placeholder:"???"},model:{value:t.modalItem.phone_num,callback:function(e){t.$set(t.modalItem,"phone_num",e)},expression:"modalItem.phone_num"}})],1),a("b-input-group",{attrs:{prepend:"Group"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tag-input-group",placeholder:"???"},model:{value:t.modalItem.group,callback:function(e){t.$set(t.modalItem,"group",e)},expression:"modalItem.group"}})],1)],1)],1),a("b-row",{staticClass:"mr-2",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.onFormSubmit()}}},[t._v("Update")])],1)],1)],1)])],1),a("b-modal",{ref:"import-modal",attrs:{"hide-footer":"",title:"Import Tags"}},[a("h3",[t._v("Select a CSV File")]),a("b-form-file",{attrs:{plain:""},model:{value:t.tagCSVFile,callback:function(e){t.tagCSVFile=e},expression:"tagCSVFile"}}),a("b-row",{staticClass:"mr-1",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:t.onImportTags}},[t._v("Import")])],1)],1)],1)],1)},Ht=[],$t=(a("4160"),a("159b"),a("72bf")),Ut={name:"TagDashboard",data:function(){var t=this.getNewTagModalItem();return{instId:"",loggedInToken:"",currentPage:1,perPage:20,fields:["tag_number","name","group","phone","email"],items:[],selectedItems:[],nameFilter:"",filterOn:["tag_number"],modalItem:t,tagCSVFile:null}},mounted:function(){var t=this.$store.state.activeUser;this.loggedInToken=this.$store.state.loggedInToken,null!=t&&(this.instId=t.institution_id),this.getTagsFromDb()},computed:{disableSingleAction:function(){return 1!=this.selectedItems.length},disableManyAction:function(){return 0==this.selectedItems.length},numRows:function(){return this.items.length},filter:function(){return this.nameFilter}},methods:{mapTagToItem:function(t){return{self:t,tag_number:t.tag_string,name:t.first_name+" "+t.last_name,group:t.group,phone:t.phone_num,email:t.email}},onRowSelected:function(t){void 0!==t[0]&&(this.selectedItems=t)},onClearSelect:function(){this.selectedItems=[],this.$refs.dashboardTable.clearSelected()},onEditSelected:function(){var t=this.selectedItems[0];null!=t&&(this.modalItem=t.self,this.$refs["edit-modal"].show())},onDeleteSelected:function(){var t=this,e=this.selectedItems.map((function(t){return t.self._id}));e.forEach((function(e){t.deleteTagByIdInDb(e)})),setTimeout((function(){t.getTagsFromDb()}),500)},onFormSubmit:function(){this.updateTagToDb()},onOpenTagImportModal:function(){this.$refs["import-modal"].show()},onImportTags:function(){this.$refs["import-modal"].hide(),this.importTagsToDb()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1,this.onClearSelect()},filterFunction:function(t){var e=!0;return this.nameFilter&&(e=t.name.toLowerCase().includes(this.nameFilter)),e},getTagsFromDb:function(){var t=this,e={instID:this.instId},a=$t.stringify(e),n=_.a.API_LOCATION+"tags?"+a,i=new XMLHttpRequest;i.open("GET",n,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),i.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText).data;e&&(t.items=e.map((function(e){return t.mapTagToItem(e)})))}else 4===this.readyState&&alert(this.responseText)};try{i.send()}catch(s){alert(s)}},updateTagToDb:function(){var t=this.modalItem,e=this,a=new XMLHttpRequest,n=_.a.API_LOCATION+"tag/"+this.modalItem._id;a.open("PUT",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.getTagsFromDb(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify(t))}catch(i){alert(i)}},deleteTagByIdInDb:function(t){var e=this,a=new XMLHttpRequest,n=_.a.API_LOCATION+"tag/"+t;a.open("DELETE",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){4===this.readyState&&200===this.status?e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3}):4===this.readyState&&alert(this.responseText)};try{a.send()}catch(i){alert(i)}},importTagsToDb:function(){var t=this,e={instID:this.instId},a=$t.stringify(e),n=_.a.API_LOCATION+"import/tags?"+a,i=new FormData;i.append("file",this.tagCSVFile);var s=new XMLHttpRequest;s.open("POST",n,!0),s.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),s.onreadystatechange=function(){4===this.readyState&&200===this.status?(t.getTagsFromDb(),t.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{s.send(i)}catch(r){alert(r)}},getNewTagModalItem:function(){return{tag_string:"",first_name:"",last_name:"",group:"",email:""}}}},Wt=Ut,zt=Object(p["a"])(Wt,qt,Ht,!1,null,null,null),Xt=zt.exports,Gt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100 ml-2 mr-2",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"},attrs:{"align-h":"between"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Members Dashboard")])]),a("b-col",{attrs:{xl:"2",md:"4"}},[a("b-button",{attrs:{variant:"primary"},on:{click:function(e){return t.onCreateMember()}}},[t._v("Add Member")])],1)],1),a("b-card",{staticClass:"h-100 ml-4 mr-4"},[a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{xl:"3",lg:"4"}},[a("b-form-group",{attrs:{label:"Contact Name","label-for":"contact-name-filter-input","label-cols-sm":"4","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"contact-name-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.nameFilter,callback:function(e){t.nameFilter=e},expression:"nameFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"7",lg:"12","align-self":"end"}},[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"info",disabled:t.disableSingleAction},on:{click:t.onCheckRegCode}},[t._v("RegCode")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"info",disabled:t.disableSingleAction},on:{click:t.onEditSelected}},[t._v("Edit")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"danger",disabled:t.disableManyAction},on:{click:t.onDeleteSelected}},[t._v("Delete")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"outline-secondary",disabled:t.disableManyAction},on:{click:t.onClearSelected}},[t._v("Clear Select")])],1)],1)],1),a("b-table",{ref:"dashboardTable",attrs:{bordered:"","sticky-header":"80%",selectable:"",id:"dashboard-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-function":t.filterFunction,"filter-included-fields":t.filterOn},on:{"row-selected":t.onRowSelected,filtered:t.onFiltered}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"dashboard-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}}),a("b-modal",{ref:"edit-modal",attrs:{"hide-footer":"",title:"Edit Member"}},[a("div",{staticClass:"d-block text-left"},[a("h3",[t._v(t._s(t.modalAction)+" Member")]),a("b-form",[a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"First Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tag-input-first-name'",placeholder:"???"},model:{value:t.modalItem.first_name,callback:function(e){t.$set(t.modalItem,"first_name",e)},expression:"modalItem.first_name"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Last Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tag-input-last-name'",placeholder:"???"},model:{value:t.modalItem.last_name,callback:function(e){t.$set(t.modalItem,"last_name",e)},expression:"modalItem.last_name"}})],1)],1)],1),a("b-input-group",{staticClass:"mb-2",attrs:{prepend:"Email"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tag-input-email",placeholder:"???"},model:{value:t.modalItem.email,callback:function(e){t.$set(t.modalItem,"email",e)},expression:"modalItem.email"}})],1),a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Phone #"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tag-input-phone-number",placeholder:"???"},model:{value:t.modalItem.phone_num,callback:function(e){t.$set(t.modalItem,"phone_num",e)},expression:"modalItem.phone_num"}})],1),a("b-input-group",{attrs:{prepend:"Group"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"tag-input-group",placeholder:"???"},model:{value:t.modalItem.group,callback:function(e){t.$set(t.modalItem,"group",e)},expression:"modalItem.group"}})],1)],1)],1),a("b-row",{staticClass:"mr-2",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:t.onFormSubmit}},[t._v(t._s(t.modalAction))])],1)],1)],1)]),a("b-modal",{ref:"reg-code-modal",attrs:{"hide-footer":"",title:"Check Registration Code"}},[a("div",{staticClass:"d-block test-left ml-4 mb-2"},[t._v(" Registration Code for "),a("b",[t._v(t._s(t.modalItem.first_name+" "+t.modalItem.last_name))]),t._v(" is "),a("b",[t._v(t._s(t.displayRegCode))])]),a("b-form",[a("b-input-group",{staticClass:"mb-2",attrs:{prepend:"Phone #"}},[a("b-form-input",{attrs:{id:"regcode-phone-input",placeholder:"xxx-xxx-xxxx"},model:{value:t.regCodePhoneNum,callback:function(e){t.regCodePhoneNum=e},expression:"regCodePhoneNum"}})],1)],1),a("b-row",{staticClass:"mr-1",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:t.onSendRegCode}},[t._v("Send RegCode")])],1)],1)],1)],1)],1)},Jt=[],Yt=a("72bf"),Vt={name:"MemberDashboard",data:function(){var t=this.getNewMemberModalItem();return{instId:"",loggedInToken:"",currentPage:1,perPage:20,fields:["name","group","phone","email","status"],items:[],selectedItems:[],nameFilter:"",filterOn:["name"],modalItem:t,modalAction:"Update",currentRegCode:null,currentMember:null,regCodePhoneNum:""}},mounted:function(){var t=this.$store.state.activeUser;this.loggedInToken=this.$store.state.loggedInToken,null!=t&&(this.instId=t.institution_id),this.getMembersFromDb()},computed:{disableSingleAction:function(){return 1!=this.selectedItems.length},disableManyAction:function(){return 0==this.selectedItems.length},numRows:function(){return this.items.length},filter:function(){return this.nameFilter},displayRegCode:function(){return null===this.currentRegCode?"":this.currentRegCode.reg_code}},methods:{mapMemberToItem:function(t){var e=2===t.status?"activated":"assigned";return{self:t,name:t.first_name+" "+t.last_name,group:t.group,phone:t.phone_num,email:t.email,status:e}},onRowSelected:function(t){void 0!==t[0]&&(this.selectedItems=t)},onClearSelected:function(){this.selectedItems=[],this.$refs.dashboardTable.clearSelected()},onEditSelected:function(){var t=this.selectedItems[0];null!=t&&(this.modalAction="Update",this.modalItem=t.self,this.$refs["edit-modal"].show())},onCreateMember:function(){this.modalAction="Create",this.modalItem=this.getNewMemberModalItem(),this.$refs["edit-modal"].show()},onDeleteSelected:function(){var t=this,e=this.selectedItems.map((function(t){return t.self._id}));e.forEach((function(e){t.deleteMemberInDb(e)})),setTimeout((function(){t.getMembersFromDb()}),500)},onFormSubmit:function(){"Update"===this.modalAction?this.updateMemberToDb():"Create"===this.modalAction&&this.createMemberInDb()},onCheckRegCode:function(){this.currentMember=this.selectedItems[0],this.getRegCodeByMemberIDFromDb(this.currentMember.self._id),this.regCodePhoneNum=this.currentMember.self.phone_num,this.$refs["reg-code-modal"].show(),this.onClearSelected()},onSendRegCode:function(){this.sendRegCodeWithSMS(),this.$refs["reg-code-modal"].hide()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1,this.onClearSelect()},filterFunction:function(t){var e=!0;return this.nameFilter&&(e=t.name.toLowerCase().includes(this.nameFilter)),e},getMembersFromDb:function(){var t=this,e={instID:this.instId},a=Yt.stringify(e),n=_.a.API_LOCATION+"members?"+a,i=new XMLHttpRequest;i.open("GET",n,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),i.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText).data;e&&(t.items=e.map((function(e){return t.mapMemberToItem(e)})))}else 4===this.readyState&&alert(this.responseText)};try{i.send()}catch(s){alert(s)}},updateMemberToDb:function(){var t=this.modalItem,e=this,a=new XMLHttpRequest,n=_.a.API_LOCATION+"member/"+this.modalItem._id;a.open("PUT",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.getMembersFromDb(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify(t))}catch(i){alert(i)}},createMemberInDb:function(){var t=this,e=new XMLHttpRequest,a=_.a.API_LOCATION+"member";e.open("POST",a,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),e.onreadystatechange=function(){4===this.readyState&&201===this.status?(t.getMembersFromDb(),t.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{e.send(JSON.stringify({institution_id:this.instId,phone_num:this.modalItem.phone_num,email:this.modalItem.email,first_name:this.modalItem.first_name,last_name:this.modalItem.last_name}))}catch(n){alert(n)}},deleteMemberInDb:function(t){var e=this,a=new XMLHttpRequest,n=_.a.API_LOCATION+"member/"+t;a.open("DELETE",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){4===this.readyState&&200===this.status?e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3}):4===this.readyState&&alert(this.responseText)};try{a.send()}catch(i){alert(i)}},getRegCodeByMemberIDFromDb:function(t){var e=this,a=new XMLHttpRequest,n={memberID:t},i=Yt.stringify(n),s=_.a.API_LOCATION+"reg-code?"+i;a.open("GET",s,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){4===this.readyState&&200===this.status?e.currentRegCode=JSON.parse(this.responseText).data:4===this.readyState&&alert(this.responseText)};try{a.send()}catch(r){alert(r)}},sendRegCodeWithSMS:function(){var t=this,e=new XMLHttpRequest,a={id:this.currentRegCode._id,phone_num:this.regCodePhoneNum,first_name:this.currentMember.first_name},n=_.a.API_LOCATION+"reg-code/sms";e.open("POST",n,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText);t.getMembersFromDb(),void 0!=e.message&&t.$bvToast.toast(e.message,{title:"DataBase Message",autoHideDelay:2e3})}else 4===this.readyState&&alert(this.responseText)};try{e.send(JSON.stringify(a))}catch(i){alert(i)}},getNewMemberModalItem:function(){return{first_name:"",last_name:"",group:"",email:""}}}},Kt=Vt,Qt=Object(p["a"])(Kt,Gt,Jt,!1,null,null,null),Zt=Qt.exports,te=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100 ml-2 mr-2",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"},attrs:{"align-h":"between"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Family Dashboard")])]),a("b-col",{attrs:{xl:"2",md:"4"}},[a("b-button",{attrs:{variant:"primary",to:"./add-family"}},[t._v("Add Family")])],1)],1),a("b-card",{staticClass:"h-100 ml-4 mr-4"},[a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-row",[a("b-col",{staticClass:"my-1",attrs:{xl:"3",lg:"4"}},[a("b-form-group",{attrs:{label:"Contact Name","label-for":"contact-name-filter-input","label-cols-sm":"4","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"contact-name-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.contactNameFilter,callback:function(e){t.contactNameFilter=e},expression:"contactNameFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Reg Code Not Sent Only","label-for":"reg-code-filter-input","label-cols-sm":"9","label-align-sm":"right","label-size":"sm"}},[a("b-form-checkbox",{attrs:{id:"reg-code-filter-input"},model:{value:t.regCodeSentFilter,callback:function(e){t.regCodeSentFilter=e},expression:"regCodeSentFilter"}})],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"7",lg:"12","align-self":"end"}},[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"info",disabled:t.disableSingleAction},on:{click:t.onViewFamily}},[t._v("View Info")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"danger",disabled:t.disableManyAction},on:{click:t.onDeleteFamilies}},[t._v("Delete")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"outline-secondary",disabled:t.disableManyAction},on:{click:t.onClearSelect}},[t._v("Clear Select")])],1)],1)],1),a("b-table",{ref:"familyTable",attrs:{bordered:"","sticky-header":"80%",selectable:"",id:"family-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-function":t.filterFunction,"filter-included-fields":t.filterOn},on:{"row-selected":t.onRowSelected,filtered:t.onFiltered}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"ward-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)},ee=[],ae=a("72bf"),ne={name:"FamilyDashboard",data:function(){return{instId:"",loggedInToken:"",currentPage:1,perPage:20,fields:["family_contact","phone","relation","reg_code_sent"],items:[],selectedItems:[],regCodeSentFilter:!1,contactNameFilter:"",filterOn:["reg_code_sent","family_contact"]}},computed:{disableSingleAction:function(){return 1!=this.selectedItems.length},disableManyAction:function(){return 0==this.selectedItems.length},numRows:function(){return this.items.length},filter:function(){return this.regCodeSentFilter+" "+this.contactNameFilter}},mounted:function(){var t=this.$store.state.activeUser;this.loggedInToken=this.$store.state.loggedInToken,null!=t&&(this.instId=t.institution_id),this.getFamiliesFromDb()},methods:{mapFamilyToItem:function(t){var e=t.contact_member_info;return{self:t,family_contact:e.name,phone:e.phone_num,relation:e.relation,reg_code_sent:t.all_reg_code_sent}},onRowSelected:function(t){void 0!==t[0]&&(this.selectedItems=t)},onClearSelect:function(){this.selectedItems=[],this.$refs.familyTable.clearSelected()},onViewFamily:function(){var t=this,e=this.selectedItems[0].self._id;this.getFamilyWithMemberByIDFromDB(e,(function(e){t.$store.commit("setLoadedFamilyWithMembers",e),t.$router.push("/portal/families/info")}))},onDeleteFamilies:function(){},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1,this.onClearSelect()},filterFunction:function(t){var e=!0;this.regCodeSentFilter&&(e=!t.reg_code_sent);var a=!0;return this.contactNameFilter.length>0&&(a=t.family_contact.toLowerCase().includes(this.contactNameFilter)),e&&a},getFamiliesFromDb:function(){var t=this,e={instID:this.instId},a=ae.stringify(e),n=new XMLHttpRequest,i=_.a.API_LOCATION+"families?"+a;n.open("GET",i,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){4===this.readyState&&200===this.status?(t.families=JSON.parse(this.responseText).data,t.families&&(t.items=t.families.map((function(e){return t.mapFamilyToItem(e)})))):4===this.readyState&&alert(this.responseText)};try{n.send()}catch(s){alert(s)}},getFamilyWithMemberByIDFromDB:function(t,e){var a=_.a.API_LOCATION+"family-with-members/"+t,n=new XMLHttpRequest;n.open("GET",a,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){if(4===this.readyState&&200===this.status){if(0==this.responseText.length)return;var t=JSON.parse(this.responseText).data;t&&null!=e&&e(t)}else 4===this.readyState&&alert(this.responseText)};try{n.send()}catch(i){alert(i)}},deleteFamilyFromDB:function(t){var e=this,a=_.a.API_LOCATION+"family/"+t,n=new XMLHttpRequest;n.open("DELETE",a,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){4===this.readyState&&200===this.status?e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3}):4===this.readyState&&alert(this.responseText)};try{n.send()}catch(i){alert(i)}}}},ie=ne,se=Object(p["a"])(ie,te,ee,!1,null,null,null),re=se.exports,oe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100 ml-2 mr-2",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Student Dashboard")])])],1),a("b-card",{staticClass:"h-100"},[a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-row",{attrs:{"algin-h":"between"}},[a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Patient Name","label-for":"ward-name-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"ward-name-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.wardNameFilter,callback:function(e){t.wardNameFilter=e},expression:"wardNameFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Group","label-for":"group-filter-input","label-cols-sm":"3","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"group-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.wardGroupFilter,callback:function(e){t.wardGroupFilter=e},expression:"wardGroupFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"2",lg:"4"}},[a("b-form-group",{attrs:{label:"Guardian Name","label-for":"guardian-name-filter-input","label-cols-sm":"5","label-align-sm":"right","label-size":"sm"}},[a("b-input-group",[a("b-form-input",{attrs:{id:"guardian-name-filter-input",type:"search",placeholder:"Type to Search"},model:{value:t.guardianNameFilter,callback:function(e){t.guardianNameFilter=e},expression:"guardianNameFilter"}})],1)],1)],1),a("b-col",{staticClass:"my-1",attrs:{xl:"6",lg:"6"}},[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"success"},on:{click:t.onRefresh}},[t._v("Refresh")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"info",disabled:t.disableSingleAction},on:{click:t.onViewFamily}},[t._v("View Family")]),t._e(),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"danger",disabled:t.disableManyAction},on:{click:t.onDeleteEvents}},[t._v("Delete")]),a("b-button",{staticClass:"mr-2 mb-2",attrs:{variant:"outline-secondary",disabled:t.disableManyAction},on:{click:t.onClearSelect}},[t._v("Clear Select")])],1)],1)],1),a("b-table",{ref:"wardTable",attrs:{bordered:"","sticky-header":"80%",selectable:"",id:"ward-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage,filter:t.filter,"filter-included-fields":t.filterOn,"filter-function":t.filterFunction},on:{"row-selected":t.onRowSelected,filtered:t.onFiltered}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"ward-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)},le=[],ce=a("2909"),de=a("b85c"),ue=a("72bf"),me={name:"Wards",data:function(){return{instId:"",loggedInToken:"",currentPage:1,perPage:20,wards:[],fields:["name","group","guardian_name","guardian_phone"],items:[],selectedItems:[],wardGroupFilter:"",wardNameFilter:"",guardianNameFilter:"",filterOn:["group","name","guardian_name"]}},mounted:function(){var t=this.$store.state.activeUser;this.loggedInToken=this.$store.state.loggedInToken,null!=t&&(this.instId=t.institution_id),this.getWardsFromDb()},computed:{disableSingleAction:function(){return 1!=this.selectedItems.length},disableManyAction:function(){return 0==this.selectedItems.length},disableCheckin:function(){return!0},numRows:function(){return this.items.length},filter:function(){return this.wardGroupFilter+" "+this.wardNameFilter+" "+this.guardianNameFilter}},methods:{mapWardToItem:function(t){return{_id:t._id,name:t.name,group:t.group,guardian_name:t.guardian_name,guardian_phone:t.phone_num}},onRowSelected:function(t){void 0!==t[0]&&(this.selectedItems=t)},onRefresh:function(){this.getWardsFromDb()},onViewFamily:function(){var t=this;this.getFamilyByWardIdFromDb(this.selectedItems[0],(function(e){e&&(t.$store.commit("setLoadedFamily",e),t.$router.push("../families/info"))}))},onCheckInEvents:function(){},onDeleteEvents:function(){var t=this,e=this.selectedItems.map((function(t){return t.self._id}));e.forEach((function(e){t.deleteWardFromDb(e)})),setTimeout((function(){t.getWardsFromDb()}),500)},onClearSelect:function(){this.selectedItems=[],this.$refs.wardTable.clearSelected()},onFiltered:function(t){this.totalRows=t.length,this.currentPage=1,this.onClearSelect()},filterFunction:function(t){var e=!0,a=!0,n=!0;return this.wardGroupFilter.length>0&&(e=t.group.toLowerCase().includes(this.wardGroupFilter)),this.wardNameFilter.length>0&&(a=t.name.toLowerCase().includes(this.wardNameFilter)),this.guardianNameFilter.length>0&&(n=t.guardian_name.toLowerCase().includes(this.guardianNameFilter)),e&&a&&n},getWardsFromDb:function(){var t=this,e={instID:this.instId},a=ue.stringify(e),n=new XMLHttpRequest,i=_.a.API_LOCATION+"families?"+a;n.open("GET",i,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText).data;e&&(t.wards=t.getWardsFromFamilies(e),t.items=t.wards.map((function(e){return t.mapWardToItem(e)})))}else 4===this.readyState&&alert(this.responseText)};try{n.send()}catch(s){alert(s)}},getFamilyByWardIdFromDb:function(t,e){var a={wardID:t._id},n=ue.stringify(a),i=new XMLHttpRequest,s=_.a.API_LOCATION+"family?"+n;i.open("GET",s,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),i.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.responseText).data;t&&null!=e&&e(t)}else 4===this.readyState&&alert(this.responseText)};try{i.send()}catch(r){alert(r)}},deleteWardFromDb:function(t){var e=this,a=new XMLHttpRequest,n=_.a.API_LOCATION+"ward/"+t._id;a.open("DELETE",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var t=JSON.parse(this.responseText);void 0!=t.message&&e.$bvToast.toast(t.message,{title:"DataBase Message",autoHideDelay:2e3})}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(i){alert(i)}},getWardsFromFamilies:function(t){var e,a=[],n=Object(de["a"])(t);try{for(n.s();!(e=n.n()).done;){var i=e.value,s=this.getWardWithContactInfo(i);a.push.apply(a,Object(ce["a"])(s))}}catch(r){n.e(r)}finally{n.f()}return a},getWardWithContactInfo:function(t){var e=t.contact_member_info;return null===e?null:t.wards.map((function(t){return{_id:t._id,name:t.first_name+" "+t.last_name,group:t.group,guardian_name:e.name,phone_num:e.phone_num}}))}}},he=me,pe=Object(p["a"])(he,oe,le,!1,null,null,null),fe=pe.exports,be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Add Family")])])],1),a("b-card",{attrs:{"bg-variant":"light"}},[a("b-form",{attrs:{state:"true"},on:{submit:t.onFamilyFormSubmit}},[a("b-form-group",{staticClass:"mb-0",attrs:{label:"Guardian Info","label-size":"lg","label-align":"left","label-class":"font-weight-bold pt-0"}},[t._l(t.guardians,(function(e){return a("b-form-group",{key:e.index,staticClass:"mb-0",attrs:{label:"Guardian "+e.index,"label-size":"md","label-align":"left","label-class":"font-weight-bold pt-0"}},[a("b-form-row",{staticClass:"mb-2"},[a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"First Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{required:"",id:"guardian-input-first-name-"+e.index,placeholder:"???"},model:{value:t.guardians[e.index-1].first_name,callback:function(a){t.$set(t.guardians[e.index-1],"first_name",a)},expression:"guardians[g.index-1].first_name"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Last Name"}},[a("b-form-input",{attrs:{required:"",id:"guardian-input-last-name-"+e.index,placeholder:"???"},model:{value:t.guardians[e.index-1].last_name,callback:function(a){t.$set(t.guardians[e.index-1],"last_name",a)},expression:"guardians[g.index-1].last_name"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Phone #"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{required:"",id:"guardian-input-phone-num-"+e.index,placeholder:"xxx-xxx-xxxx"},model:{value:t.guardians[e.index-1].phone_num,callback:function(a){t.$set(t.guardians[e.index-1],"phone_num",a)},expression:"guardians[g.index-1].phone_num"}})],1)],1)],1),a("b-form-row",{staticClass:"mb-3"},[a("b-col",{attrs:{sm:"5"}},[a("b-input-group",{attrs:{prepend:"Email"}},[a("b-form-input",{attrs:{required:"",id:"guardian-input-email-"+e.index,placeholder:"xxxxxxx@xxx.com"},model:{value:t.guardians[e.index-1].email,callback:function(a){t.$set(t.guardians[e.index-1],"email",a)},expression:"guardians[g.index-1].email"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Relation"}},[a("b-form-input",{attrs:{required:"",id:"guardian-input-relation-"+e.index,placeholder:"Brother"},model:{value:t.guardians[e.index-1].relation,callback:function(a){t.$set(t.guardians[e.index-1],"relation",a)},expression:"guardians[g.index-1].relation"}})],1)],1)],1)],1)})),a("b-row",[a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-info"},on:{click:t.onAddGuardian}},[t._v("Add Guardian")]),t.guardians.length>1?a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-danger"},on:{click:t.onRemoveGuardian}},[t._v("Remove Guardian")]):t._e()],1)],2),a("b-form-group",{staticClass:"mt-4 mb-0",attrs:{label:"Vehicle Info","label-size":"lg","label-align":"left","label-class":"font-weight-bold pt-0"}},[t._l(t.vehicles,(function(e){return a("b-form-group",{key:e.index,staticClass:"mb-0",attrs:{label:"Vehicle "+e.index,"label-size":"md","label-align":"left","label-class":"font-weight-bold pt-0"}},[a("b-form-row",{staticClass:"mb-2"},[a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Make"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"vehicle-input-make-"+e.index,placeholder:"Ford"},model:{value:t.vehicles[e.index-1].make,callback:function(a){t.$set(t.vehicles[e.index-1],"make",a)},expression:"vehicles[v.index-1].make"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Model"}},[a("b-form-input",{attrs:{id:"vehicle-input-model-"+e.index,placeholder:"Model T"},model:{value:t.vehicles[e.index-1].model,callback:function(a){t.$set(t.vehicles[e.index-1],"model",a)},expression:"vehicles[v.index-1].model"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Color"}},[a("b-form-input",{attrs:{id:"vehicle-input-color-"+e.index,placeholder:"Blue"},model:{value:t.vehicles[e.index-1].color,callback:function(a){t.$set(t.vehicles[e.index-1],"color",a)},expression:"vehicles[v.index-1].color"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Plate #"}},[a("b-form-input",{attrs:{id:"vehicle-input-plate-number-"+e.index,placeholder:"XXXXXX"},model:{value:t.vehicles[e.index-1].plate_num,callback:function(a){t.$set(t.vehicles[e.index-1],"plate_num",a)},expression:"vehicles[v.index-1].plate_num"}})],1)],1)],1)],1)})),a("b-row",[a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-info"},on:{click:t.onAddVehicle}},[t._v("Add Vehicle")]),t.vehicles.length>1?a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-danger"},on:{click:t.onRemoveVehicle}},[t._v("Remove Vehicle")]):t._e()],1)],2),a("b-form-group",{staticClass:"mt-4 mb-0",attrs:{label:"Children Info","label-size":"lg","label-align":"left","label-class":"font-weight-bold pt-0"}},[t._l(t.wards,(function(e){return a("b-form-group",{key:e.index,staticClass:"mb-0",attrs:{label:"Child "+e.index,"label-size":"md","label-align":"left","label-class":"font-weight-bold pt-0"}},[a("b-form-row",{staticClass:"mb-2"},[a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"First Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"ward-input-first-name-"+e.index,placeholder:"???"},model:{value:t.wards[e.index-1].first_name,callback:function(a){t.$set(t.wards[e.index-1],"first_name",a)},expression:"wards[w.index-1].first_name"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Last Name"}},[a("b-form-input",{attrs:{id:"ward-input-last-name-"+e.index,placeholder:"???"},model:{value:t.wards[e.index-1].last_name,callback:function(a){t.$set(t.wards[e.index-1],"last_name",a)},expression:"wards[w.index-1].last_name"}})],1)],1),a("b-col",{attrs:{sm:"3"}},[a("b-input-group",{attrs:{prepend:"Group"}},[a("b-form-input",{attrs:{id:"ward-input-group-"+e.index,placeholder:"Group?"},model:{value:t.wards[e.index-1].group,callback:function(a){t.$set(t.wards[e.index-1],"group",a)},expression:"wards[w.index-1].group"}})],1)],1)],1)],1)})),a("b-row",[a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-info"},on:{click:t.onAddWard}},[t._v("Add Child")]),t.wards.length>1?a("b-button",{staticClass:"ml-2 mt-2",attrs:{variant:"outline-danger"},on:{click:t.onRemoveWard}},[t._v("Remove Child")]):t._e()],1)],2),a("b-row",{staticClass:"mr-2",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary",type:"submit"}},[t._v("Submit")])],1)],1)],1)],1)},ge=[],ve={name:"AddFamily",data:function(){return{guardians:[this.getNewGuardian(1)],wards:[this.getNewWard(1)],vehicles:[this.getNewVehicle(1)],loggedInToken:""}},watch:{},computed:{instId:function(){var t=this.$store.state.activeUser;return null===t||void 0===t.institution_id?"":t.institution_id}},created:function(){this.loggedInToken=this.$store.state.loggedInToken},methods:{onAddGuardian:function(){var t=this.getNewGuardian(this.guardians.length+1);this.guardians.push(t)},onRemoveGuardian:function(){this.guardians.pop()},onAddVehicle:function(){var t=this.getNewWard(this.vehicles.length+1);this.vehicles.push(t)},onRemoveVehicle:function(){this.vehicles.pop()},onAddWard:function(){var t=this.getNewWard(this.wards.length+1);this.wards.push(t)},onRemoveWard:function(){this.wards.pop()},onFamilyFormSubmit:function(t){t.preventDefault();var e=this.getFamilyToSubmit(),a=this,n=new XMLHttpRequest,i=_.a.API_LOCATION+"family";n.open("POST",i,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){if(4===this.readyState&&201===this.status){var t=JSON.parse(this.responseText);void 0!=t.message&&a.$bvToast.toast(t.message,{title:"DataBase Message",autoHideDelay:2e3})}else 4===this.readyState&&alert(this.responseText)};try{n.send(JSON.stringify(e))}catch(s){alert(s)}},getNewGuardian:function(t){return{index:t,first_name:"",last_name:"",phone_num:"",email:"",relation:""}},getNewWard:function(t){return{index:t,first_name:"",last_name:"",group:""}},getNewVehicle:function(t){return{index:t,make:"",model:"",color:"",plate_num:""}},getFamilyToSubmit:function(){return{institution_id:this.instId,members:this.guardians,vehicles:this.vehicles,wards:this.wards}}}},ye=ve,_e=Object(p["a"])(ye,be,ge,!1,null,null,null),Te=_e.exports,Ce=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("h3",[t._v("Family Information")]),a("family-info-card",{attrs:{"item-type":"guardian",entities:t.members},on:{"need-entity-action":function(e){return t.updateMemberToDB(e)},"need-entity-create":function(e){return t.addNewMemberToDB(e)},"need-entity-delete":function(e){return t.deleteMemberFromDB(e)}}}),a("family-info-card",{attrs:{"item-type":"vehicle",entities:t.vehicles},on:{"need-entity-update":function(e){return t.updateVehicleToDB(e)},"need-entity-create":function(e){return t.addNewVehicleToDB(e)},"need-entity-delete":function(e){return t.deleteVehicleFromDB(e)}}}),a("family-info-card",{attrs:{"item-type":"ward",entities:t.wards},on:{"need-entity-update":function(e){return t.updateWardToDB(e)},"need-entity-create":function(e){return t.addNewWardToDB(e)},"need-entity-delete":function(e){return t.deleteWardFromDB(e)}}})],1)},Ie=[],we=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("b-card",{attrs:{title:t.title,align:"left"},scopedSlots:t._u([{key:"header",fn:function(){return[a("b-row",{attrs:{"align-h":"end"}},[a("b-button",{on:{click:function(e){return t.onCreateEntity()}}},[t._v("Add "+t._s(t.title))])],1)]},proxy:!0}])},[a("b-table",{attrs:{bordered:"",items:t.items,fields:t.fields,stacked:"md"},scopedSlots:t._u([{key:"cell(actions)",fn:function(e){return["guardian"===t.itemType?a("b-link",{staticClass:"mr-2",staticStyle:{color:"green"},on:{click:function(a){return t.onCheckRegCode(e.item)}}},[a("b",[t._v("Reg.Code")])]):t._e(),a("b-link",{staticClass:"mr-2",staticStyle:{color:"blue"},on:{click:function(a){return t.onEditEntity(e.item)}}},[a("b",[t._v("Edit")])]),a("b-link",{staticClass:"mr-1",staticStyle:{color:"red"},on:{click:function(a){return t.onDeleteEntity(e.item)}}},[a("b",[t._v("Delete")])])]}}])})],1),a("b-modal",{ref:"reg-code-modal",attrs:{"hide-footer":"",title:"Check Registration Code"}},[a("div",{staticClass:"d-block test-left ml-4 mb-2"},[t._v(" Registration Code for "),a("b",[t._v(t._s(t.modalItem.first_name+" "+t.modalItem.last_name))]),t._v(" is "),a("b",[t._v(t._s(t.currentRegCode?t.currentRegCode.reg_code:""))])]),a("b-form",[a("b-input-group",{staticClass:"mb-2",attrs:{prepend:"Phone #"}},[a("b-form-input",{attrs:{id:"regcode-phone-input",placeholder:"xxx-xxx-xxxx"},model:{value:t.regCodePhoneNum,callback:function(e){t.regCodePhoneNum=e},expression:"regCodePhoneNum"}})],1)],1),a("b-row",{staticClass:"mr-1",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:t.onSendRegCode}},[t._v("Send RegCode")])],1)],1),"guardian"===t.itemType?a("b-modal",{ref:"entity-modal-guardian",attrs:{"hide-footer":"",title:"Edit Guardian"}},[a("div",{staticClass:"d-block text-left"},[a("h3",[t._v(t._s(t.modalAction)+" Guardian")])]),a("b-form",[a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"First Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"guardian-input-first-name'",placeholder:"???"},model:{value:t.modalItem.first_name,callback:function(e){t.$set(t.modalItem,"first_name",e)},expression:"modalItem.first_name"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Last Name"}},[a("b-form-input",{attrs:{id:"guardian-input-last-name",placeholder:"???"},model:{value:t.modalItem.last_name,callback:function(e){t.$set(t.modalItem,"last_name",e)},expression:"modalItem.last_name"}})],1)],1)],1),a("b-input-group",{staticClass:"mb-2",attrs:{prepend:"Email"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"guardian-input-email",placeholder:"???"},model:{value:t.modalItem.email,callback:function(e){t.$set(t.modalItem,"email",e)},expression:"modalItem.email"}})],1),a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Phone #"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"guardian-input-phone-number",placeholder:"???"},model:{value:t.modalItem.phone_num,callback:function(e){t.$set(t.modalItem,"phone_num",e)},expression:"modalItem.phone_num"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Relation"}},[a("b-form-input",{attrs:{id:"guardian-input-relation",placeholder:"???"},model:{value:t.modalItem.family_info.relation,callback:function(e){t.$set(t.modalItem.family_info,"relation",e)},expression:"modalItem.family_info.relation"}})],1)],1)],1),a("b-row",{staticClass:"mr-2",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:t.onEntityFormSubmit}},[t._v(t._s(t.modalAction))])],1)],1)],1):t._e(),"vehicle"===t.itemType?a("b-modal",{ref:"entity-modal-vehicle",attrs:{"hide-footer":"",title:"Edit Vehicle"}},[a("div",{staticClass:"d-block text-left"},[a("h3",[t._v(t._s(t.modalAction)+" Vehicle")])]),a("b-form",[a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Make"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"vehicle-input-make'",placeholder:"???"},model:{value:t.modalItem.make,callback:function(e){t.$set(t.modalItem,"make",e)},expression:"modalItem.make"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Model"}},[a("b-form-input",{attrs:{id:"vehicle-input-model",placeholder:"???"},model:{value:t.modalItem.model,callback:function(e){t.$set(t.modalItem,"model",e)},expression:"modalItem.model"}})],1)],1)],1),a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Color"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"vehicle-input-color'",placeholder:"???"},model:{value:t.modalItem.color,callback:function(e){t.$set(t.modalItem,"color",e)},expression:"modalItem.color"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Plate #"}},[a("b-form-input",{attrs:{id:"vehicle-input-plate",placeholder:"???"},model:{value:t.modalItem.plate_number,callback:function(e){t.$set(t.modalItem,"plate_number",e)},expression:"modalItem.plate_number"}})],1)],1)],1),a("b-row",{staticClass:"mr-2",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:t.onEntityFormSubmit}},[t._v(t._s(t.modalAction))])],1)],1)],1):t._e(),"ward"===t.itemType?a("b-modal",{ref:"entity-modal-ward",attrs:{"hide-footer":"",title:"Edit Ward"}},[a("div",{staticClass:"d-block text-left"},[a("h3",[t._v(t._s(t.modalAction)+" Ward")])]),a("b-form",[a("b-form-row",{staticClass:"mb-2 mr-2"},[a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"First Name"}},[a("b-form-input",{staticClass:"mb-2 mr-sm-2 mb-sm-0",attrs:{id:"ward-input-first-name'",placeholder:"???"},model:{value:t.modalItem.first_name,callback:function(e){t.$set(t.modalItem,"first_name",e)},expression:"modalItem.first_name"}})],1)],1),a("b-col",{attrs:{sm:"6"}},[a("b-input-group",{attrs:{prepend:"Last Name"}},[a("b-form-input",{attrs:{id:"ward-input-last-name",placeholder:"???"},model:{value:t.modalItem.last_name,callback:function(e){t.$set(t.modalItem,"last_name",e)},expression:"modalItem.last_name"}})],1)],1)],1),a("b-form-row",[a("b-col",{attrs:{sm:"4"}},[a("b-input-group",{attrs:{prepend:"Group"}},[a("b-form-input",{attrs:{id:"ward-input-group",placeholder:"???"},model:{value:t.modalItem.group,callback:function(e){t.$set(t.modalItem,"group",e)},expression:"modalItem.group"}})],1)],1)],1),a("b-row",{staticClass:"mr-2",attrs:{"align-h":"end"}},[a("b-button",{attrs:{variant:"primary"},on:{click:t.onEntityFormSubmit}},[t._v(t._s(t.modalAction))])],1)],1)],1):t._e()],1)},xe=[],ke=(a("fb6a"),a("72bf")),Se={name:"FamilyInfoCard",props:{itemType:String,entities:Array},data:function(){var t=this.getNewModalItem();return{loggedInToken:"",modalItem:t,modalAction:"Update",currentRegCode:null,regCodePhoneNum:""}},computed:{fields:function(){return"guardian"===this.itemType?["guardian_name","phone","email","relation","reg_code_sent","status","actions"]:"vehicle"===this.itemType?["make","model","color","plate_number","actions"]:"ward"===this.itemType?["name","group","actions"]:[]},items:function(){var t=this;return"guardian"===this.itemType?this.entities.map((function(e){return t.mapMemberToItem(e)})):"vehicle"===this.itemType?this.entities.map((function(e){return t.mapVehicleToItem(e)})):"ward"===this.itemType?this.entities.map((function(e){return t.mapWardToItem(e)})):[]},entityModalName:function(){return"guardian"===this.itemType?"entity-modal-guardian":"vehicle"===this.itemType?"entity-modal-vehicle":"ward"===this.itemType?"entity-modal-ward":[]},title:function(){return this.itemType.charAt(0).toUpperCase()+this.itemType.slice(1)}},created:function(){this.loggedInToken=this.$store.state.loggedInToken},watch:{entities:function(){0===this.items.length&&(this.modalItem=this.getNewModalItem())}},methods:{mapMemberToItem:function(t){var e=0!==t.status,a=e?"YES":"NO",n=2===t.status?"activated":"assigned";return{self:t,guardian_name:t.first_name+" "+t.last_name,phone:t.phone_num,email:t.email,relation:t.relation,device_id:t.device_id,reg_code_sent:a,status:n}},mapVehicleToItem:function(t){return{self:t,make:t.make,model:t.model,color:t.color,plate_number:t.plate_num}},mapWardToItem:function(t){return{self:t,name:t.first_name+" "+t.last_name,group:t.group}},onCheckRegCode:function(t){this.getRegCodeByMemberIDFromDB(t.self._id),this.modalItem=t.self,this.regCodePhoneNum=t.self.phone_num,this.$refs["reg-code-modal"].show()},onSendRegCode:function(){this.sendRegCodeWithSMS(),this.$refs["reg-code-modal"].hide()},onCreateEntity:function(){this.modalAction="Create",this.modalItem=this.getNewModalItem(),this.$refs[this.entityModalName].show()},onEditEntity:function(t){this.modalAction="Update",this.modalItem=t.self,this.$refs[this.entityModalName].show()},onEntityFormSubmit:function(){this.$refs[this.entityModalName].hide(),"Update"===this.modalAction?this.$emit("need-entity-update",this.modalItem):"Create"===this.modalAction&&this.$emit("need-entity-create",this.modalItem)},onDeleteEntity:function(t){this.$emit("need-entity-delete",t.self._id)},getRegCodeByMemberIDFromDB:function(t){var e=this,a=new XMLHttpRequest,n={memberID:t},i=ke.stringify(n),s=_.a.API_LOCATION+"reg-code?"+i;a.open("GET",s,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){4===this.readyState&&200===this.status?e.currentRegCode=JSON.parse(this.responseText).data:4===this.readyState&&alert(this.responseText)};try{a.send()}catch(r){alert(r)}},sendRegCodeWithSMS:function(){var t=this,e=new XMLHttpRequest,a={id:this.currentRegCode._id,phone_num:this.regCodePhoneNum,first_name:this.modalItem.first_name},n=_.a.API_LOCATION+"reg-code/sms";e.open("POST",n,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText);t.getFamilyByIdFromDb(),void 0!=e.message&&t.$bvToast.toast(e.message,{title:"DataBase Message",autoHideDelay:2e3})}else 4===this.readyState&&alert(this.responseText)};try{e.send(JSON.stringify(a))}catch(i){alert(i)}},getNewModalItem:function(){return"guardian"===this.itemType?this.getNewModalMemberItem():"vehicle"===this.itemType?this.getNewModalVehicleItem():"ward"===this.itemType?this.getNewModalWardItem():void 0},getNewModalMemberItem:function(){return{phone_num:"",email:"",first_name:"",last_name:"",family_info:{relation:""}}},getNewModalVehicleItem:function(){return{make:"",model:"",color:"",plate_num:""}},getNewModalWardItem:function(){return{first_name:"",last_name:"",group:""}}}},Ae=Se,Re=Object(p["a"])(Ae,we,xe,!1,null,null,null),Me=Re.exports,Fe=a("72bf"),De={name:"FamilyInfo",components:{"family-info-card":Me},data:function(){return{loadedFamilyWithMembers:null,loggedInToken:""}},computed:{members:function(){return null===this.loadedFamilyWithMembers?[]:this.loadedFamilyWithMembers.members},vehicles:function(){return null===this.loadedFamilyWithMembers?[]:this.loadedFamilyWithMembers.vehicles},wards:function(){return null===this.loadedFamilyWithMembers?[]:this.loadedFamilyWithMembers.wards}},created:function(){this.loadedFamilyWithMembers=this.$store.state.loadedFamilyWithMembers,this.loggedInToken=this.$store.state.loggedInToken},methods:{addNewMemberToDB:function(t){var e=this,a=_.a.API_LOCATION+"member",n=new XMLHttpRequest;n.open("POST",a,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){4===this.readyState&&201===this.status?(e.getFamilyWithMemberByIDFromDB(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{var i=JSON.stringify(this.getMemberToSubmit(t));n.send(i)}catch(s){alert(s)}},updateMemberToDB:function(t){var e=this,a=_.a.API_LOCATION+"member/"+t._id,n=new XMLHttpRequest;n.open("PUT",a,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.getFamilyWithMemberByIDFromDB(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{n.send(JSON.stringify(t))}catch(i){alert(i)}},deleteMemberFromDB:function(t){var e=this,a=_.a.API_LOCATION+"member/"+t,n=new XMLHttpRequest;n.open("DELETE",a,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.getFamilyWithMemberByIDFromDB(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{n.send()}catch(i){alert(i)}},addNewVehicleToDB:function(t){var e=this,a={familyID:this.loadedFamilyWithMembers._id},n=Fe.stringify(a),i=_.a.API_LOCATION+"vehicle/add-new?"+n,s=new XMLHttpRequest;s.open("POST",i,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),s.onreadystatechange=function(){4===this.readyState&&201===this.status?(e.getFamilyWithMemberByIDFromDB(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{s.send(JSON.stringify(t))}catch(r){alert(r)}},updateVehicleToDB:function(t){var e=this,a=_.a.API_LOCATION+"vehicle/"+t._id,n=new XMLHttpRequest;n.open("PUT",a,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.getFamilyWithMemberByIDFromDB(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{n.send(JSON.stringify(t))}catch(i){alert(i)}},deleteVehicleFromDB:function(t){var e=this,a=_.a.API_LOCATION+"vehicle/"+t,n=new XMLHttpRequest;n.open("DELETE",a,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.getFamilyWithMemberByIDFromDB(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{n.send()}catch(i){alert(i)}},addNewWardToDB:function(t){var e=this,a={familyID:this.loadedFamilyWithMembers._id},n=Fe.stringify(a),i=_.a.API_LOCATION+"ward/add-new?"+n,s=new XMLHttpRequest;s.open("POST",i,!0),s.setRequestHeader("Content-Type","application/json;charset=UTF-8"),s.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),s.onreadystatechange=function(){4===this.readyState&&201===this.status?(e.getFamilyWithMemberByIDFromDB(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{s.send(JSON.stringify(t))}catch(r){alert(r)}},updateWardToDB:function(t){var e=this,a=_.a.API_LOCATION+"ward/"+t._id,n=new XMLHttpRequest;n.open("PUT",a,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.getFamilyWithMemberByIDFromDB(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{n.send(JSON.stringify(t))}catch(i){alert(i)}},deleteWardFromDB:function(t){var e=this,a=_.a.API_LOCATION+"ward/"+t,n=new XMLHttpRequest;n.open("DELETE",a,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.getFamilyWithMemberByIDFromDB(),e.$bvToast.toast(this.responseText,{title:"DataBase Message",autoHideDelay:2e3})):4===this.readyState&&alert(this.responseText)};try{n.send()}catch(i){alert(i)}},getFamilyWithMemberByIDFromDB:function(){var t=this,e=new XMLHttpRequest,a=_.a.API_LOCATION+"family-with-members/"+this.loadedFamilyWithMembers._id;e.open("GET",a,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){if(0==this.responseText.length)return;var e=JSON.parse(this.responseText).data;t.loadedFamilyWithMembers=e,t.$store.commit("setLoadedFamilyWithMembers",e)}else 4===this.readyState&&alert(this.responseText)};try{e.send()}catch(n){alert(n)}},getMemberToSubmit:function(t){return{institution_id:this.loadedFamilyWithMembers.institution_id,family_info:{id:this.loadedFamilyWithMembers._id,relation:t.relation},phone_num:t.phone_num,email:t.email,first_name:t.first_name,last_name:t.last_name}}}},Oe=De,Ne=Object(p["a"])(Oe,Ce,Ie,!1,null,null,null),Ee=Ne.exports,Pe=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Admin Dashboard")])])],1),a("b-card",{staticClass:"h-100"},[a("b-container",{staticClass:"h-100",attrs:{fluid:""}},[a("b-table",{ref:"adminTable",attrs:{bordered:"","sticky-header":"90%",id:"admin-table",responsive:"sm",items:t.items,fields:t.fields,"current-page":t.currentPage,"per-page":t.perPage}}),a("b-pagination",{attrs:{"total-rows":t.numRows,"per-page":t.perPage,"aria-controls":"ward-table"},model:{value:t.currentPage,callback:function(e){t.currentPage=e},expression:"currentPage"}})],1)],1)],1)},Le=[],je=a("72bf"),Be=a("c1df"),qe="MMM DD YYYY hh:mm A",He={name:"Admins",data:function(){return{instId:"",loggedInToken:"",currentPage:1,perPage:20,admins:[],fields:["FRAS_username","last_login"],items:[]}},mounted:function(){var t=this.$store.state.activeUser;this.loggedInToken=this.$store.state.loggedInToken,null!=t&&(this.instId=t.institution_id),this.getAdminsFromDb()},computed:{numRows:function(){return this.items.length}},methods:{mapAdminToItem:function(t){var e=Be(t.last_login_at),a=e.isBefore("1970-01-01")?"":e.format(qe);return{_id:t._id,FRAS_username:t.fras_username,last_login:a}},getAdminsFromDb:function(){var t=this,e={instID:this.instId},a=je.stringify(e),n=new XMLHttpRequest,i=_.a.API_LOCATION+"admins?"+a;n.open("GET",i,!0),n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),n.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),n.onreadystatechange=function(){4===this.readyState&&200===this.status?(t.admins=JSON.parse(this.responseText).data,t.admins&&(t.items=t.admins.map((function(e){return t.mapAdminToItem(e)})))):4===this.readyState&&alert(this.responseText)};try{n.send()}catch(s){alert(s)}}}},$e=He,Ue=Object(p["a"])($e,Pe,Le,!1,null,null,null),We=Ue.exports,ze=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",{staticClass:"h-100 ml-2 mr-2",attrs:{fluid:""}},[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Profile")])])],1),a("b-row",{staticClass:"ml-4 mr-4"},[a("b-col",{attrs:{lg:"4"}},[a("b-card",[a("b-row",{staticClass:"ml-2 mt-2"}),a("h5",[a("b",[t._v(" Institution: ")]),t._v(" "+t._s(t.name))]),a("h5",[a("b",[t._v(" Address: ")]),t._v(" "+t._s(t.address+", "+t.state))])],1)],1)],1)],1)},Xe=[],Ge={name:"AdminProfile",data:function(){return{instId:"",institution:null}},computed:{name:function(){return null===this.institution?"":this.institution.name},address:function(){return null===this.institution?"":this.institution.address},state:function(){return null===this.institution?"":this.institution.state}},mounted:function(){var t=this.$store.state.activeUser;null!=t&&(this.instId=t.institution_id),this.getInstFromDb()},methods:{getInstFromDb:function(){var t=this,e=new XMLHttpRequest,a=_.a.API_LOCATION+"institution/"+this.instId;e.open("GET",a,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){4===this.readyState&&200===this.status?t.institution=JSON.parse(this.responseText).data:4===this.readyState&&alert(this.responseText)};try{e.send()}catch(n){alert(n)}}}},Je=Ge,Ye=Object(p["a"])(Je,ze,Xe,!1,null,null,null),Ve=Ye.exports,Ke=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Settings")])])],1),a("b-row",{staticClass:"ml-4 mr-4"},[a("b-col",{attrs:{md:"3",cols:"6"}},[a("b-button",{attrs:{variant:"info"},on:{click:t.onExportCCRecords}},[t._v("Export CC-Records")])],1),t.enableMemberExport?a("b-col",{attrs:{md:"3",cols:"6"}},[a("b-button",{attrs:{variant:"info"},on:{click:t.onExportMembers}},[t._v("Export "+t._s(t.MemberDisplay))])],1):t._e(),t.enableFamilyExport?a("b-col",{attrs:{md:"3",cols:"6"}},[a("b-button",{attrs:{variant:"info"},on:{click:t.onExportFamilies}},[t._v("Export Families")])],1):t._e(),t.enableFamilyExport?a("b-col",{attrs:{md:"3",cols:"6"}},[a("b-button",{attrs:{variant:"info"},on:{click:t.onExportWards}},[t._v("Export Students")])],1):t._e(),t.enableSurveyExport?a("b-col",{attrs:{md:"3",cols:"6"}},[a("b-button",{attrs:{variant:"info"},on:{click:t.onExportSurveys}},[t._v("Export Surveys")])],1):t._e()],1)],1)},Qe=[],Ze=(a("d3b7"),a("3ca3"),a("ddb0"),a("2b3d"),a("c1df")),ta=a("72bf"),ea={name:"AdminProfile",data:function(){return{institution:null,loggedInToken:""}},computed:{MemberDisplay:function(){return null===this.institution?"":"hospital"===this.institution.type?"Patients":"corporate"===this.institution.type?"Employee":"Member"},enableMemberExport:function(){return null!==this.institution&&"standard"===this.institution.member_type},enableFamilyExport:function(){return null!==this.institution&&"guardian"===this.institution.member_type},enableSurveyExport:function(){return null!==this.institution&&this.institution.require_survey}},mounted:function(){var t=this.$store.state.institution;this.loggedInToken=this.$store.state.loggedInToken,null!=t&&(this.institution=t)},methods:{onExportCCRecords:function(){var t=this;this.getCCRecordsExportFromDb("cc-records",(function(e){var a="export-cc-records-"+Ze().format("MMM.DD")+".csv";t.downloadExport(a,e)}))},onExportMembers:function(){var t=this;this.getCCRecordsExportFromDb("members",(function(e){var a="export-members-"+Ze().format("MMM.DD")+".csv";t.downloadExport(a,e)}))},onExportWards:function(){var t=this;this.getCCRecordsExportFromDb("wards",(function(e){var a="export-wards-"+Ze().format("MMM.DD")+".csv";t.downloadExport(a,e)}))},onExportFamilies:function(){var t=this;this.getCCRecordsExportFromDb("families",(function(e){var a="export-families-"+Ze().format("MMM.DD")+".csv";t.downloadExport(a,e)}))},onExportSurveys:function(){var t=this;this.getCCRecordsExportFromDb("surveys",(function(e){var a="export-surveys-"+Ze().format("MMM.DD")+".csv";t.downloadExport(a,e)}))},getCCRecordsExportFromDb:function(t,e){var a={instID:this.institution._id,hourOffset:-(new Date).getTimezoneOffset()/60},n=ta.stringify(a),i=new XMLHttpRequest,s=_.a.API_LOCATION+"export/"+t+"?"+n;i.open("GET",s,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),i.onreadystatechange=function(){4===this.readyState&&200===this.status?e(this.responseText):4===this.readyState&&alert(this.responseText)};try{i.send()}catch(r){alert(r)}},downloadExport:function(t,e){var a=new File([e],t,{type:"text/csv"}),n=window.document.createElement("a");n.href=window.URL.createObjectURL(a),n.download=t,n.click()}}},aa=ea,na=Object(p["a"])(aa,Ke,Qe,!1,null,null,null),ia=na.exports,sa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[t.useFamilyCCMobile?a("family-cc-mobile"):t._e(),t.useMemberCCMobile?a("member-cc-mobile"):t._e(),t.useMemberCheckInMobile?a("member-check-in-mobile"):t._e()],1)},ra=[],oa=a("8c1b"),la=a.n(oa),ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2"},[a("h4",[t._v("Welcome "+t._s(t.loggedInMember?t.loggedInMember.first_name:""))])]),a("b-row",{staticClass:"ml-4 mr-4",attrs:{"align-h":"between"}},[a("b-col",{attrs:{lg:"3",cols:"5"}},[a("b-row",[t._v(t._s(t.date))]),a("b-row",[t._v(t._s(t.time))])],1),a("b-col",{attrs:{lg:"2",cols:"3"}},[a("b-button",{attrs:{variant:"success"},on:{click:t.onSync}},[t._v("Sync")])],1)],1),a("b-row",{staticStyle:{"margin-top":"80px"}},[a("b-col",{attrs:{cols:"12"}},[a("b-row",{staticClass:"mb-2",attrs:{"align-h":"around"}},[a("b-button",{attrs:{variant:"info",disabled:!t.allCheckIn},on:{click:function(e){return t.onCheckInAll()}}},[t._v("Check In All")]),a("b-button",{attrs:{variant:"info",disabled:!t.allScheduleCheckOut&&!t.allCheckOut},on:{click:function(e){return t.onCheckOutAll()}}},[t._v("Check Out All")])],1),t._l(t.wards,(function(e,n){return a("b-row",{key:e._id},[a("b-card",{staticStyle:{width:"100%"},scopedSlots:t._u([{key:"header",fn:function(){return[a("b-row",{attrs:{"align-h":"between"}},[a("b-col",[a("h5",[a("b",[t._v(t._s(e.first_name+" "+e.last_name))])])]),a("b-col",[t._v(t._s(e.group))])],1)]},proxy:!0}],null,!0)},[a("b-row",{attrs:{"align-h":"around"}},[a("b-button",{attrs:{variant:"primary",disabled:"Check-In"!=t.wardStages[n]},on:{click:function(e){return t.onCheckInSingle(n)}}},[t._v("Check In")]),a("b-button",{attrs:{variant:"primary",disabled:"Check-In"===t.wardStages[n]},on:{click:function(e){return t.onCheckOutSingle(n)}}},[t._v("Check Out")])],1)],1)],1)}))],2)],1),a("b-modal",{ref:"cc-modal",attrs:{static:"","hide-footer":"",title:t.modalTitle+" QRCode"},on:{hidden:t.onModalHidden}},[a("b-container",[a("div",{staticStyle:{width:"250",height:"250","margin-top":"15px"},attrs:{id:"qrcode"}})])],1),a("b-modal",{ref:"schedule-modal",attrs:{"hide-footer":"",title:"Schedule Checkout"},on:{hidden:t.onModalHidden}},[a("b-container",[a("b-form",{on:{submit:t.onScheduleCheckOut}},[a("b-form-group",{attrs:{label:"Checkout After: "}},[a("b-form-select",{attrs:{required:"",options:t.scheduleOptions},model:{value:t.selectedSchedule,callback:function(e){t.selectedSchedule=e},expression:"selectedSchedule"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("OK")])],1)],1)],1)],1)},da=[];a("a623"),a("a15b"),a("99af"),a("ac1f"),a("25f0"),a("466d"),a("5319");(function(){function t(t){this.mode=a.MODE_8BIT_BYTE,this.data=t,this.parsedData=[];for(var e=0,n=this.data.length;e<n;e++){var i=[],s=this.data.charCodeAt(e);s>65536?(i[0]=240|(1835008&s)>>>18,i[1]=128|(258048&s)>>>12,i[2]=128|(4032&s)>>>6,i[3]=128|63&s):s>2048?(i[0]=224|(61440&s)>>>12,i[1]=128|(4032&s)>>>6,i[2]=128|63&s):s>128?(i[0]=192|(1984&s)>>>6,i[1]=128|63&s):i[0]=s,this.parsedData.push(i)}this.parsedData=Array.prototype.concat.apply([],this.parsedData),this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function e(t,e){this.typeNumber=t,this.errorCorrectLevel=e,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}t.prototype={getLength:function(t){return this.parsedData.length},write:function(t){for(var e=0,a=this.parsedData.length;e<a;e++)t.put(this.parsedData[e],8)}},e.prototype={addData:function(e){var a=new t(e);this.dataList.push(a),this.dataCache=null},isDark:function(t,e){if(t<0||this.moduleCount<=t||e<0||this.moduleCount<=e)throw new Error(t+","+e);return this.modules[t][e]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(t,a){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var n=0;n<this.moduleCount;n++){this.modules[n]=new Array(this.moduleCount);for(var i=0;i<this.moduleCount;i++)this.modules[n][i]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(t,a),this.typeNumber>=7&&this.setupTypeNumber(t),null==this.dataCache&&(this.dataCache=e.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,a)},setupPositionProbePattern:function(t,e){for(var a=-1;a<=7;a++)if(!(t+a<=-1||this.moduleCount<=t+a))for(var n=-1;n<=7;n++)e+n<=-1||this.moduleCount<=e+n||(this.modules[t+a][e+n]=0<=a&&a<=6&&(0==n||6==n)||0<=n&&n<=6&&(0==a||6==a)||2<=a&&a<=4&&2<=n&&n<=4)},getBestMaskPattern:function(){for(var t=0,e=0,a=0;a<8;a++){this.makeImpl(!0,a);var n=r.getLostPoint(this);(0==a||t>n)&&(t=n,e=a)}return e},createMovieClip:function(t,e,a){var n=t.createEmptyMovieClip(e,a),i=1;this.make();for(var s=0;s<this.modules.length;s++)for(var r=s*i,o=0;o<this.modules[s].length;o++){var l=o*i,c=this.modules[s][o];c&&(n.beginFill(0,100),n.moveTo(l,r),n.lineTo(l+i,r),n.lineTo(l+i,r+i),n.lineTo(l,r+i),n.endFill())}return n},setupTimingPattern:function(){for(var t=8;t<this.moduleCount-8;t++)null==this.modules[t][6]&&(this.modules[t][6]=t%2==0);for(var e=8;e<this.moduleCount-8;e++)null==this.modules[6][e]&&(this.modules[6][e]=e%2==0)},setupPositionAdjustPattern:function(){for(var t=r.getPatternPosition(this.typeNumber),e=0;e<t.length;e++)for(var a=0;a<t.length;a++){var n=t[e],i=t[a];if(null==this.modules[n][i])for(var s=-2;s<=2;s++)for(var o=-2;o<=2;o++)this.modules[n+s][i+o]=-2==s||2==s||-2==o||2==o||0==s&&0==o}},setupTypeNumber:function(t){for(var e=r.getBCHTypeNumber(this.typeNumber),a=0;a<18;a++){var n=!t&&1==(e>>a&1);this.modules[Math.floor(a/3)][a%3+this.moduleCount-8-3]=n}for(a=0;a<18;a++){n=!t&&1==(e>>a&1);this.modules[a%3+this.moduleCount-8-3][Math.floor(a/3)]=n}},setupTypeInfo:function(t,e){for(var a=this.errorCorrectLevel<<3|e,n=r.getBCHTypeInfo(a),i=0;i<15;i++){var s=!t&&1==(n>>i&1);i<6?this.modules[i][8]=s:i<8?this.modules[i+1][8]=s:this.modules[this.moduleCount-15+i][8]=s}for(i=0;i<15;i++){s=!t&&1==(n>>i&1);i<8?this.modules[8][this.moduleCount-i-1]=s:i<9?this.modules[8][15-i-1+1]=s:this.modules[8][15-i-1]=s}this.modules[this.moduleCount-8][8]=!t},mapData:function(t,e){for(var a=-1,n=this.moduleCount-1,i=7,s=0,o=this.moduleCount-1;o>0;o-=2){6==o&&o--;while(1){for(var l=0;l<2;l++)if(null==this.modules[n][o-l]){var c=!1;s<t.length&&(c=1==(t[s]>>>i&1));var d=r.getMask(e,n,o-l);d&&(c=!c),this.modules[n][o-l]=c,i--,-1==i&&(s++,i=7)}if(n+=a,n<0||this.moduleCount<=n){n-=a,a=-a;break}}}}},e.PAD0=236,e.PAD1=17,e.createData=function(t,a,n){for(var i=d.getRSBlocks(t,a),s=new u,o=0;o<n.length;o++){var l=n[o];s.put(l.mode,4),s.put(l.getLength(),r.getLengthInBits(l.mode,t)),l.write(s)}var c=0;for(o=0;o<i.length;o++)c+=i[o].dataCount;if(s.getLengthInBits()>8*c)throw new Error("code length overflow. ("+s.getLengthInBits()+">"+8*c+")");s.getLengthInBits()+4<=8*c&&s.put(0,4);while(s.getLengthInBits()%8!=0)s.putBit(!1);while(1){if(s.getLengthInBits()>=8*c)break;if(s.put(e.PAD0,8),s.getLengthInBits()>=8*c)break;s.put(e.PAD1,8)}return e.createBytes(s,i)},e.createBytes=function(t,e){for(var a=0,n=0,i=0,s=new Array(e.length),o=new Array(e.length),l=0;l<e.length;l++){var d=e[l].dataCount,u=e[l].totalCount-d;n=Math.max(n,d),i=Math.max(i,u),s[l]=new Array(d);for(var m=0;m<s[l].length;m++)s[l][m]=255&t.buffer[m+a];a+=d;var h=r.getErrorCorrectPolynomial(u),p=new c(s[l],h.getLength()-1),f=p.mod(h);o[l]=new Array(h.getLength()-1);for(m=0;m<o[l].length;m++){var b=m+f.getLength()-o[l].length;o[l][m]=b>=0?f.get(b):0}}var g=0;for(m=0;m<e.length;m++)g+=e[m].totalCount;var v=new Array(g),y=0;for(m=0;m<n;m++)for(l=0;l<e.length;l++)m<s[l].length&&(v[y++]=s[l][m]);for(m=0;m<i;m++)for(l=0;l<e.length;l++)m<o[l].length&&(v[y++]=o[l][m]);return v};for(var a={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},i={L:1,M:0,Q:3,H:2},s={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},r={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(t){var e=t<<10;while(r.getBCHDigit(e)-r.getBCHDigit(r.G15)>=0)e^=r.G15<<r.getBCHDigit(e)-r.getBCHDigit(r.G15);return(t<<10|e)^r.G15_MASK},getBCHTypeNumber:function(t){var e=t<<12;while(r.getBCHDigit(e)-r.getBCHDigit(r.G18)>=0)e^=r.G18<<r.getBCHDigit(e)-r.getBCHDigit(r.G18);return t<<12|e},getBCHDigit:function(t){var e=0;while(0!=t)e++,t>>>=1;return e},getPatternPosition:function(t){return r.PATTERN_POSITION_TABLE[t-1]},getMask:function(t,e,a){switch(t){case s.PATTERN000:return(e+a)%2==0;case s.PATTERN001:return e%2==0;case s.PATTERN010:return a%3==0;case s.PATTERN011:return(e+a)%3==0;case s.PATTERN100:return(Math.floor(e/2)+Math.floor(a/3))%2==0;case s.PATTERN101:return e*a%2+e*a%3==0;case s.PATTERN110:return(e*a%2+e*a%3)%2==0;case s.PATTERN111:return(e*a%3+(e+a)%2)%2==0;default:throw new Error("bad maskPattern:"+t)}},getErrorCorrectPolynomial:function(t){for(var e=new c([1],0),a=0;a<t;a++)e=e.multiply(new c([1,o.gexp(a)],0));return e},getLengthInBits:function(t,e){if(1<=e&&e<10)switch(t){case a.MODE_NUMBER:return 10;case a.MODE_ALPHA_NUM:return 9;case a.MODE_8BIT_BYTE:return 8;case a.MODE_KANJI:return 8;default:throw new Error("mode:"+t)}else if(e<27)switch(t){case a.MODE_NUMBER:return 12;case a.MODE_ALPHA_NUM:return 11;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 10;default:throw new Error("mode:"+t)}else{if(!(e<41))throw new Error("type:"+e);switch(t){case a.MODE_NUMBER:return 14;case a.MODE_ALPHA_NUM:return 13;case a.MODE_8BIT_BYTE:return 16;case a.MODE_KANJI:return 12;default:throw new Error("mode:"+t)}}},getLostPoint:function(t){for(var e=t.getModuleCount(),a=0,n=0;n<e;n++)for(var i=0;i<e;i++){for(var s=0,r=t.isDark(n,i),o=-1;o<=1;o++)if(!(n+o<0||e<=n+o))for(var l=-1;l<=1;l++)i+l<0||e<=i+l||0==o&&0==l||r==t.isDark(n+o,i+l)&&s++;s>5&&(a+=3+s-5)}for(n=0;n<e-1;n++)for(i=0;i<e-1;i++){var c=0;t.isDark(n,i)&&c++,t.isDark(n+1,i)&&c++,t.isDark(n,i+1)&&c++,t.isDark(n+1,i+1)&&c++,0!=c&&4!=c||(a+=3)}for(n=0;n<e;n++)for(i=0;i<e-6;i++)t.isDark(n,i)&&!t.isDark(n,i+1)&&t.isDark(n,i+2)&&t.isDark(n,i+3)&&t.isDark(n,i+4)&&!t.isDark(n,i+5)&&t.isDark(n,i+6)&&(a+=40);for(i=0;i<e;i++)for(n=0;n<e-6;n++)t.isDark(n,i)&&!t.isDark(n+1,i)&&t.isDark(n+2,i)&&t.isDark(n+3,i)&&t.isDark(n+4,i)&&!t.isDark(n+5,i)&&t.isDark(n+6,i)&&(a+=40);var d=0;for(i=0;i<e;i++)for(n=0;n<e;n++)t.isDark(n,i)&&d++;var u=Math.abs(100*d/e/e-50)/5;return a+=10*u,a}},o={glog:function(t){if(t<1)throw new Error("glog("+t+")");return o.LOG_TABLE[t]},gexp:function(t){while(t<0)t+=255;while(t>=256)t-=255;return o.EXP_TABLE[t]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},l=0;l<8;l++)o.EXP_TABLE[l]=1<<l;for(l=8;l<256;l++)o.EXP_TABLE[l]=o.EXP_TABLE[l-4]^o.EXP_TABLE[l-5]^o.EXP_TABLE[l-6]^o.EXP_TABLE[l-8];for(l=0;l<255;l++)o.LOG_TABLE[o.EXP_TABLE[l]]=l;function c(t,e){if(void 0==t.length)throw new Error(t.length+"/"+e);var a=0;while(a<t.length&&0==t[a])a++;this.num=new Array(t.length-a+e);for(var n=0;n<t.length-a;n++)this.num[n]=t[n+a]}function d(t,e){this.totalCount=t,this.dataCount=e}function u(){this.buffer=[],this.length=0}c.prototype={get:function(t){return this.num[t]},getLength:function(){return this.num.length},multiply:function(t){for(var e=new Array(this.getLength()+t.getLength()-1),a=0;a<this.getLength();a++)for(var n=0;n<t.getLength();n++)e[a+n]^=o.gexp(o.glog(this.get(a))+o.glog(t.get(n)));return new c(e,0)},mod:function(t){if(this.getLength()-t.getLength()<0)return this;for(var e=o.glog(this.get(0))-o.glog(t.get(0)),a=new Array(this.getLength()),n=0;n<this.getLength();n++)a[n]=this.get(n);for(n=0;n<t.getLength();n++)a[n]^=o.gexp(o.glog(t.get(n))+e);return new c(a,0).mod(t)}},d.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],d.getRSBlocks=function(t,e){var a=d.getRsBlockTable(t,e);if(void 0==a)throw new Error("bad rs block @ typeNumber:"+t+"/errorCorrectLevel:"+e);for(var n=a.length/3,i=[],s=0;s<n;s++)for(var r=a[3*s+0],o=a[3*s+1],l=a[3*s+2],c=0;c<r;c++)i.push(new d(o,l));return i},d.getRsBlockTable=function(t,e){switch(e){case i.L:return d.RS_BLOCK_TABLE[4*(t-1)+0];case i.M:return d.RS_BLOCK_TABLE[4*(t-1)+1];case i.Q:return d.RS_BLOCK_TABLE[4*(t-1)+2];case i.H:return d.RS_BLOCK_TABLE[4*(t-1)+3];default:return}},u.prototype={get:function(t){var e=Math.floor(t/8);return 1==(this.buffer[e]>>>7-t%8&1)},put:function(t,e){for(var a=0;a<e;a++)this.putBit(1==(t>>>e-a-1&1))},getLengthInBits:function(){return this.length},putBit:function(t){var e=Math.floor(this.length/8);this.buffer.length<=e&&this.buffer.push(0),t&&(this.buffer[e]|=128>>>this.length%8),this.length++}};var m=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]];function h(){return"undefined"!=typeof CanvasRenderingContext2D}function p(){var t=!1,e=navigator.userAgent;if(/android/i.test(e)){t=!0;var a=e.toString().match(/android ([0-9]\.[0-9])/i);a&&a[1]&&(t=parseFloat(a[1]))}return t}var f=function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){var e=this._htOption,a=this._el,n=t.getModuleCount();Math.floor(e.width/n),Math.floor(e.height/n);function i(t,e){var a=document.createElementNS("http://www.w3.org/2000/svg",t);for(var n in e)e.hasOwnProperty(n)&&a.setAttribute(n,e[n]);return a}this.clear();var s=i("svg",{viewBox:"0 0 "+String(n)+" "+String(n),width:"100%",height:"100%",fill:e.colorLight});s.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),a.appendChild(s),s.appendChild(i("rect",{fill:e.colorLight,width:"100%",height:"100%"})),s.appendChild(i("rect",{fill:e.colorDark,width:"1",height:"1",id:"template"}));for(var r=0;r<n;r++)for(var o=0;o<n;o++)if(t.isDark(r,o)){var l=i("use",{x:String(o),y:String(r)});l.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),s.appendChild(l)}},t.prototype.clear=function(){while(this._el.hasChildNodes())this._el.removeChild(this._el.lastChild)},t}(),b="svg"===document.documentElement.tagName.toLowerCase(),g=b?f:h()?function(){function t(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function e(t,e){var a=this;if(a._fFail=e,a._fSuccess=t,null===a._bSupportDataURI){var n=document.createElement("img"),i=function(){a._bSupportDataURI=!1,a._fFail&&a._fFail.call(a)},s=function(){a._bSupportDataURI=!0,a._fSuccess&&a._fSuccess.call(a)};return n.onabort=i,n.onerror=i,n.onload=s,void(n.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==")}!0===a._bSupportDataURI&&a._fSuccess?a._fSuccess.call(a):!1===a._bSupportDataURI&&a._fFail&&a._fFail.call(a)}var a=function(t,e){this._bIsPainted=!1,this._android=p(),this._htOption=e,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=e.width,this._elCanvas.height=e.height,t.appendChild(this._elCanvas),this._el=t,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.alt="Scan me!",this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return a.prototype.draw=function(t){var e=this._elImage,a=this._oContext,n=this._htOption,i=t.getModuleCount(),s=n.width/i,r=n.height/i,o=Math.round(s),l=Math.round(r);e.style.display="none",this.clear();for(var c=0;c<i;c++)for(var d=0;d<i;d++){var u=t.isDark(c,d),m=d*s,h=c*r;a.strokeStyle=u?n.colorDark:n.colorLight,a.lineWidth=1,a.fillStyle=u?n.colorDark:n.colorLight,a.fillRect(m,h,s,r),a.strokeRect(Math.floor(m)+.5,Math.floor(h)+.5,o,l),a.strokeRect(Math.ceil(m)-.5,Math.ceil(h)-.5,o,l)}this._bIsPainted=!0},a.prototype.makeImage=function(){this._bIsPainted&&e.call(this,t)},a.prototype.isPainted=function(){return this._bIsPainted},a.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},a.prototype.round=function(t){return t?Math.floor(1e3*t)/1e3:t},a}():function(){var t=function(t,e){this._el=t,this._htOption=e};return t.prototype.draw=function(t){for(var e=this._htOption,a=this._el,n=t.getModuleCount(),i=Math.floor(e.width/n),s=Math.floor(e.height/n),r=['<table style="border:0;border-collapse:collapse;">'],o=0;o<n;o++){r.push("<tr>");for(var l=0;l<n;l++)r.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+i+"px;height:"+s+"px;background-color:"+(t.isDark(o,l)?e.colorDark:e.colorLight)+';"></td>');r.push("</tr>")}r.push("</table>"),a.innerHTML=r.join("");var c=a.childNodes[0],d=(e.width-c.offsetWidth)/2,u=(e.height-c.offsetHeight)/2;d>0&&u>0&&(c.style.margin=u+"px "+d+"px")},t.prototype.clear=function(){this._el.innerHTML=""},t}();function v(t,e){for(var a=1,n=y(t),s=0,r=m.length;s<=r;s++){var o=0;switch(e){case i.L:o=m[s][0];break;case i.M:o=m[s][1];break;case i.Q:o=m[s][2];break;case i.H:o=m[s][3];break}if(n<=o)break;a++}if(a>m.length)throw new Error("Too long data");return a}function y(t){var e=encodeURI(t).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return e.length+(e.length!=t?3:0)}n=function(t,e){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:i.H},"string"===typeof e&&(e={text:e}),e)for(var a in e)this._htOption[a]=e[a];"string"==typeof t&&(t=document.getElementById(t)),this._htOption.useSVG&&(g=f),this._android=p(),this._el=t,this._oQRCode=null,this._oDrawing=new g(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},n.prototype.makeCode=function(t){this._oQRCode=new e(v(t,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(t),this._oQRCode.make(),this._el.title=t,this._oDrawing.draw(this._oQRCode),this.makeImage()},n.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},n.prototype.clear=function(){this._oDrawing.clear()},n.CorrectLevel=i})();var ua=n,ma=a("72bf"),ha=a("c1df"),pa="MMM DD, YYYY",fa="hh:mm:ss A",ba="Check-In",ga="Schedule",va="Check-Out",ya={name:"family-cc-mobile",data:function(){return{institution:null,timer:null,date:"",time:"",loggedInMember:null,loggedInFamily:null,loggedInToken:"",ccRecords:[],qrcode:null,modalTitle:"",selectedSchedule:0,scheduleOptions:[{value:0,text:"Now"},{value:5,text:"5 minutes"},{value:10,text:"10 minutes"},{value:20,text:"20 minutes"},{value:30,text:"30 minutes"},{value:60,text:"1 hour"}],schedulingWardIndex:-1}},computed:{wards:function(){return null===this.loggedInFamily?[]:this.loggedInFamily.wards},wardIds:function(){return this.loggedInFamily.wards.map((function(t){return t._id}))},wardStages:function(){if(null===this.ccRecords)return[];var t=this.ccRecords.map((function(t){return 0===t.status?ba:1===t.status?ga:2===t.status?va:void 0}));return t},allCheckIn:function(){return this.wardStages.every((function(t){return t===ba}))},allScheduleCheckOut:function(){return this.wardStages.every((function(t){return t===ga}))},allCheckOut:function(){return this.wardStages.every((function(t){return t===va}))}},created:function(){var t=this,e=ha;this.timer=setInterval((function(){t.timeObj=e(),t.date=t.timeObj.format(pa),t.time=t.timeObj.format(fa)}),1e3)},mounted:function(){var t=this;if(this.institution=this.$store.state.institution,this.loggedInMember=this.$store.state.loggedInMember,this.loggedInFamily=this.$store.state.loggedInFamily,this.loggedInToken=this.$store.state.loggedInToken,null!==this.loggedInFamily){this.qrcode=new ua(document.getElementById("qrcode"),{width:250,height:250});var e=this.$route.query.proceed,a=this.$store.state.wardIndexForCheckIn,n=this;this.syncCCRecordWithDb((function(){"true"==e&&(-1===a?n.showCCModalAll():(n.showCCModalSingle(a),t.$store.commit("resetWardIndexForCheckIn")))}))}else this.$router.push("/mobile/login")},methods:{onSync:function(){this.syncCCRecordWithDb((function(){}))},onCheckInSingle:function(t){if(this.institution.require_survey){this.$store.commit("setWardIndexForCheckIn",t);var e={instID:this.institution._id,memberID:this.loggedInMember._id},a=ma.stringify(e),n="check-in-survey.html";this.institution.survey_file&&(n=this.institution.survey_file),window.location.href="/surveys/".concat(n,"?")+a}else this.showCCModalSingle(t)},onCheckInAll:function(){if(this.institution.require_survey){var t={instID:this.institution._id,memberID:this.loggedInMember._id},e=ma.stringify(t),a="check-in-survey.html";this.institution.survey_file&&(a=this.institution.survey_file),window.location.href="/surveys/".concat(a,"?")+e}else this.showCCModalAll()},onCheckOutSingle:function(t){this.wardStages[t]!==ga?this.wardStages[t]===va&&this.showCCModalSingle(t):this.showScheduleModalSingle(t)},onCheckOutAll:function(){this.allScheduleCheckOut?this.showScheduleModalAll():(this.allCheckIn||this.allCheckOut)&&this.showCCModalAll()},onModalHidden:function(){this.syncCCRecordWithDb((function(){}))},onScheduleCheckOut:function(){var t=this;this.sendCCScheduleToDb((function(){t.syncCCRecordWithDb((function(){}))})),this.$refs["schedule-modal"].hide()},showCCModalSingle:function(t){this.syncCCRecordWithDb((function(){})),this.modalTitle=this.wardStages[t],this.showCCModal();var e=this.getQRCodeStringSingle(t);this.qrcode.makeCode(e)},showCCModalAll:function(){this.syncCCRecordWithDb((function(){})),this.modalTitle=(this.allCheckIn?ba:va)+" All",this.showCCModal();var t=this.getQRCodeStringAll();this.qrcode.makeCode(t)},showCCModal:function(){this.$refs["cc-modal"].show()},showScheduleModalSingle:function(t){this.schedulingWardIndex=t,this.$refs["schedule-modal"].show()},showScheduleModalAll:function(){this.schedulingWardIndex=-1,this.$refs["schedule-modal"].show()},syncCCRecordWithDb:function(t){var e=this,a=new XMLHttpRequest,n=_.a.API_LOCATION+"cc-record/sync";a.open("POST",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){4===this.readyState&&200===this.status?(e.ccRecords=JSON.parse(this.responseText).data,e.ccRecords&&null!=t&&t(e.ccRecords)):4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify({institution_id:this.institution._id,ward_ids:this.wardIds}))}catch(i){alert(i)}},sendCCScheduleToDb:function(t){var e=new XMLHttpRequest,a=null;a=-1==this.schedulingWardIndex?{ward_ids:this.wardIds,timestamp:ha().add(this.selectedSchedule,"minutes").unix()}:{ward_ids:[this.wardIds[this.schedulingWardIndex]],timestamp:ha().add(this.selectedSchedule,"minutes").unix()};var n=_.a.API_LOCATION+"cc-record/schedule";e.open("POST",n,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),e.onreadystatechange=function(){4===this.readyState&&200===this.status?null!=t&&t():4===this.readyState&&alert(this.responseText)};try{e.send(JSON.stringify(a))}catch(i){alert(i)}},getQRCodeStringSingle:function(t){var e=this.wardStages[t]===ba?"checkin":"checkout";return[this.loggedInMember._id,this.wardIds[t],e,"single"].join("|")},getQRCodeStringAll:function(){var t=this.allCheckIn?"checkin":"checkout";return[this.loggedInMember._id,"none",t,"all"].join("|")}}},_a=ya,Ta=Object(p["a"])(_a,ca,da,!1,null,null,null),Ca=Ta.exports,Ia=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2"},[a("h4",[t._v("Welcome "+t._s(t.loggedInMember?t.loggedInMember.first_name:""))])]),a("b-row",{staticClass:"ml-4 mr-4",attrs:{"align-h":"between"}},[a("b-col",{attrs:{lg:"3",cols:"5"}},[a("b-row",[t._v(t._s(t.date))]),a("b-row",[t._v(t._s(t.time))])],1),a("b-col",{attrs:{lg:"2",cols:"3"}},[a("b-button",{attrs:{variant:"success"},on:{click:t.onSync}},[t._v("Sync")])],1)],1),a("b-row",{staticStyle:{"margin-top":"80px"}},[a("b-col",{attrs:{cols:"12"}},[a("b-row",{staticClass:"mb-2",attrs:{"align-h":"around"}},[a("b-button",{attrs:{variant:"info",disabled:"Check-In"!=t.memberStage},on:{click:function(e){return t.onCheckIn()}}},[t._v("Check In")]),a("b-button",{attrs:{variant:"info",disabled:"Check-In"===t.memberStage},on:{click:function(e){return t.onCheckOut()}}},[t._v("Check Out")])],1)],1)],1),a("b-modal",{ref:"cc-modal",attrs:{static:"","hide-footer":"",title:t.modalTitle+" QRCode"},on:{hidden:t.onModalHidden}},[a("b-container",[a("div",{staticStyle:{width:"250",height:"250","margin-top":"15px"},attrs:{id:"qrcode"}})])],1)],1)},wa=[],xa=a("72bf"),ka=a("c1df"),Sa="MMM DD, YYYY",Aa="hh:mm:ss A",Ra="Check-In",Ma="Check-Out",Fa={name:"member-cc-mobile",data:function(){return{institution:null,timer:null,timeObj:null,date:"",time:"",loggedInMember:null,loggedInToken:"",ccRecord:null,qrcode:null,modalTitle:""}},created:function(){var t=this,e=ka;this.timer=setInterval((function(){t.timeObj=e(),t.date=t.timeObj.format(Sa),t.time=t.timeObj.format(Aa)}),1e3)},mounted:function(){if(this.institution=this.$store.state.institution,this.loggedInMember=this.$store.state.loggedInMember,this.loggedInToken=this.$store.state.loggedInToken,null!==this.loggedInMember){this.qrcode=new ua(document.getElementById("qrcode"),{width:250,height:250});var t=this.$route.query.proceed,e=this;this.syncCCRecordWithDb((function(){"true"===t&&e.showCCModal()}))}else this.$router.push("/mobile/login")},beforeDestroy:function(){clearInterval(this.timer)},computed:{wards:function(){return null===this.loggedInFamily?[]:this.loggedInFamily.wards},memberStage:function(){return null===this.ccRecord?"":0===this.ccRecord.status?Ra:1===this.ccRecord.status?Ma:""}},methods:{onSync:function(){this.syncCCRecordWithDb((function(){}))},onCheckIn:function(){if(this.institution.require_survey){var t={instID:this.institution._id,memberID:this.loggedInMember._id},e=xa.stringify(t),a="check-in-survey.html";this.institution.survey_file&&(a=this.institution.survey_file),window.location.href="/surveys/".concat(a,"?")+e}else this.showCCModal()},onCheckOut:function(){this.showCCModal()},onModalHidden:function(){this.syncCCRecordWithDb()},showCCModal:function(){this.syncCCRecordWithDb((function(){})),this.modalTitle=this.memberStage,this.$refs["cc-modal"].show();var t=this.getQRCodeString();this.qrcode.makeCode(t)},syncCCRecordWithDb:function(t){var e=this,a=new XMLHttpRequest,n={institution_id:this.loggedInMember.institution_id,member_id:this.loggedInMember._id},i=_.a.API_LOCATION+"cc-record/sync";a.open("POST",i,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var a=e.ccRecord;e.ccRecord=JSON.parse(this.responseText).data,e.ccRecord&&null!=t&&t(a,e.ccRecord)}else 4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify(n))}catch(s){alert(s)}},getQRCodeString:function(){var t=this.memberStage==Ra?"checkin":"checkout";return[this.loggedInMember._id,t].join("|")}}},Da=Fa,Oa=Object(p["a"])(Da,Ia,wa,!1,null,null,null),Na=Oa.exports,Ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wrap"}},[a("div",{staticClass:"activate-head"},[t._m(0),a("div",{staticClass:"person-welcome"},[a("p",{staticClass:"person-welcome-text"},[t._v("Hello, "+t._s(t.loggedInGuardianName))])])]),a("div",{staticClass:"profile"},[a("div",{staticClass:"person-photo"},[a("b-icon",{staticClass:"person",attrs:{icon:"person-circle","font-scale":"9rem"}})],1),a("div",{staticClass:"info"},[a("p",{staticClass:"info-text"},[t._v("Welcome Back")]),a("p",{staticClass:"info-date"},[t._v(t._s(t.date))])])]),a("div",{staticClass:"button-div"},[a("div",{staticClass:"checkin-button-div"},[a("b-button",{staticClass:"checkin-button",attrs:{pill:"",block:"",size:"lg"},on:{click:t.onCheckIn}},[t._v(" Check In ")])],1),a("div",{staticClass:"signout-button-div"},[a("b-button",{staticClass:"signout-button",attrs:{pill:"",block:"",variant:"dark",size:"lg"},on:{click:t.onSignOut}},[t._v(" Sign Out ")])],1)]),a("b-modal",{ref:"cc-modal",attrs:{static:"","hide-footer":"",title:t.modalTitle+" QRCode"},on:{hidden:t.onModalHidden}},[a("b-container",[a("div",{staticStyle:{width:"250",height:"250","margin-top":"15px"},attrs:{id:"qrcode"}})])],1)],1)},Pa=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activate-logo"},[n("img",{staticClass:"header-image",attrs:{src:a("e93f")}})])}],La=a("72bf"),ja=a("c1df"),Ba="MMM DD, YYYY",qa="hh:mm:ss A",Ha="Check-In",$a="Schedule",Ua="Check-Out",Wa={name:"member-check-in-mobile",data:function(){return{institution:null,timer:null,timeObj:null,date:"",time:"",loggedInMember:null,loggedInToken:"",ccRecord:null,qrcode:null,modalTitle:""}},created:function(){var t=this,e=ja;this.timer=setInterval((function(){t.timeObj=e(),t.date=t.timeObj.format(Ba),t.time=t.timeObj.format(qa)}),1e3)},mounted:function(){if(this.institution=this.$store.state.institution,this.loggedInMember=this.$store.state.loggedInMember,this.loggedInToken=this.$store.state.loggedInToken,null!==this.loggedInMember){this.qrcode=new ua(document.getElementById("qrcode"),{width:250,height:250});var t=this.$route.query.proceed,e=this;this.syncCCRecordWithDb((function(){"true"===t&&e.showCCModal()}))}else this.$router.push("/mobile/login")},beforeDestroy:function(){clearInterval(this.timer)},computed:{wards:function(){return null===this.loggedInFamily?[]:this.loggedInFamily.wards},memberStage:function(){return null===this.ccRecord?"":0===this.ccRecord.status?Ha:1===this.ccRecord.status?$a:2===this.ccRecord.status?Ua:""},loggedInGuardianName:function(){return this.loggedInMember?this.loggedInMember.first_name:""}},methods:{onSync:function(){this.syncCCRecordWithDb((function(){}))},onCheckIn:function(){if(this.institution.require_survey){var t={instID:this.institution._id,memberID:this.loggedInMember._id},e=La.stringify(t),a="check-in-survey.html";this.institution.survey_file&&(a=this.institution.survey_file),window.location.href="/surveys/".concat(a,"?")+e}else this.showCCModal()},onSignOut:function(){this.$store.commit("resetLoggedInFamily"),this.$store.commit("resetLoggedInMember"),this.$store.commit("resetLoggedInToken"),this.$store.commit("resetInstitution"),this.$router.push("/mobile/login")},onModalHidden:function(){this.syncCCRecordWithDb()},showCCModal:function(){this.syncCCRecordWithDb((function(){})),this.modalTitle=this.memberStage,this.$refs["cc-modal"].show();var t=this.getQRCodeString();this.qrcode.makeCode(t)},syncCCRecordWithDb:function(t){var e=this,a=new XMLHttpRequest,n={institution_id:this.loggedInMember.institution_id,member_id:this.loggedInMember._id},i=_.a.API_LOCATION+"cc-record/sync";a.open("POST",i,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(this.loggedInToken)),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var a=e.ccRecord;e.ccRecord=JSON.parse(this.responseText).data,e.ccRecord&&null!=t&&t(a,e.ccRecord)}else 4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify(n))}catch(s){alert(s)}},getQRCodeString:function(){var t;return this.memberStage==Ha&&(t="checkin"),this.memberStage==Ua&&(t="checkout"),[this.loggedInMember._id,t].join("|")}}},za=Wa,Xa=(a("bed7"),Object(p["a"])(za,Ea,Pa,!1,null,null,null)),Ga=Xa.exports,Ja={name:"Mobile",components:{"family-cc-mobile":Ca,"member-cc-mobile":Na,"member-check-in-mobile":Ga},data:function(){return{institution:null,loggedInMember:null}},computed:{useFamilyCCMobile:function(){return null!==this.institution&&(this.institution.member_type===la.a.MEMBER_TYPE_GUARDIAN&&this.institution.workflow_type===la.a.WORKFLOW_TYPE_CC)},useMemberCCMobile:function(){return null!==this.institution&&(this.institution.member_type===la.a.MEMBER_TYPE_STANDARD&&this.institution.workflow_type===la.a.WORKFLOW_TYPE_CC)},useMemberCheckInMobile:function(){return null!==this.institution&&(this.institution.member_type===la.a.MEMBER_TYPE_STANDARD&&this.institution.workflow_type===la.a.WORKFLOW_TYPE_CHECK_IN)}},mounted:function(){var t=this.$store.state.institution;return this.loggedInMember=this.$store.state.loggedInMember,null===this.loggedInMember||null===t?(alert("Something went wrong, try loggin in again!"),void this.$router.push("/mobile/login")):void(this.institution=t)}},Ya=Ja,Va=Object(p["a"])(Ya,sa,ra,!1,null,null,null),Ka=Va.exports,Qa=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wrap"}},[t._m(0),a("b-form",{staticClass:"activate-form",on:{submit:t.onMemberRegister}},[a("div",{staticClass:"row",attrs:{id:"first-name-row"}},[a("b-input-group",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.firstName,expression:"firstName"}],staticClass:"form-control form-rounded form-control-lg",attrs:{id:"first-name-input",type:"text",placeholder:"First Name",required:""},domProps:{value:t.firstName},on:{input:function(e){e.target.composing||(t.firstName=e.target.value)}}})])],1),a("div",{staticClass:"row",attrs:{id:"last-name-row"}},[a("b-input-group",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.lastName,expression:"lastName"}],staticClass:"form-control form-rounded form-control-lg",attrs:{id:"last-name-input",placeholder:"Last Name",type:"text",required:""},domProps:{value:t.lastName},on:{input:function(e){e.target.composing||(t.lastName=e.target.value)}}})]),a("p",{staticClass:"notes"})],1),a("div",{staticClass:"row"},[a("b-input-group",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],staticClass:"form-control form-rounded form-control-lg",attrs:{id:"phone-number-input",placeholder:"Phone Number",type:"text",required:""},domProps:{value:t.phoneNum},on:{keyup:t.focusOut,blur:t.focusOut,input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}})]),a("p",{staticClass:"notes"})],1),a("div",{staticClass:"row",attrs:{id:"registration-button-div"}},[a("b-button",{staticClass:"registration-button",attrs:{pill:"",type:"submit",block:"",variant:"dark",size:"lg"}},[t._v("Sign Up")])],1),a("div",{staticClass:"link-to-pages"},[t._v(" Already have an account? "),a("b-link",{on:{click:function(e){return t.$router.push("/mobile/login")}}},[a("span",{staticClass:"link-text"},[t._v("Log In")])])],1)])],1)},Za=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activate-head"},[n("div",{staticClass:"activate-logo"},[n("img",{staticClass:"header-image",attrs:{src:a("e93f")}})]),n("div",{staticClass:"welcome"},[n("p",{staticClass:"welcome-text"},[t._v("Sign Up")])])])}],tn={name:"MobileRegistration",props:["instID"],data:function(){return{firstName:"",lastName:"",phoneValue:"",phoneNum:"",preventNextIteration:!1}},created:function(){},methods:{focusOut:function(t){["Arrow","Backspace","Shift"].includes(t.key)?this.preventNextIteration=!0:this.preventNextIteration?this.preventNextIteration=!1:(this.phoneNum.length>0&&(this.phoneValue=this.phoneNum.replace(/-/g,"").match(/(\d{1,10})/g)[0]),this.phoneNum=this.phoneValue.replace(/(\d{1,3})(\d{1,3})(\d{1,4})/g,"$1-$2-$3"))},onMemberRegister:function(t){var e=this;t.preventDefault(),this.registerMemberInDb((function(){alert("Registration Succeed! Please Check SMS for RegCode"),e.$router.push("/mobile/activate")}))},registerMemberInDb:function(t){var e=new XMLHttpRequest,a=_.a.API_LOCATION+"member/register-and-sms";e.open("POST",a,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText);if(e.data&&null!=t)return void t(e)}else if(4===this.readyState){var a=JSON.parse(this.responseText);if(void 0!=a.message)return void alert(a.message);alert(this.responseText)}};try{e.send(JSON.stringify({institution_id:this.instID,phone_num:this.phoneNum,first_name:this.firstName,last_name:this.lastName}))}catch(n){alert(n)}}}},en=tn,an=(a("d9f2"),Object(p["a"])(en,Qa,Za,!1,null,null,null)),nn=an.exports,sn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wrap"}},[t._m(0),a("b-form",{staticClass:"form",on:{submit:t.onMemberLogin}},[a("div",{staticClass:"row"},[a("b-input-group",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],staticClass:"form-control form-rounded form-control-lg",attrs:{id:"phone-number-input",type:"text",placeholder:"Phone Number",required:""},domProps:{value:t.phoneNum},on:{keyup:t.focusOut,blur:t.focusOut,input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}})])],1),a("div",{staticClass:"row",attrs:{id:"sign-in-button-div"}},[a("b-button",{staticClass:"sign-in-button",attrs:{pill:"",type:"submit",block:"",variant:"dark",size:"lg"}},[t._v(" Sign In ")])],1),a("div",{staticClass:"link-to-pages"},[t._v(" First time user? "),a("b-link",{on:{click:function(e){return t.$router.push("/mobile/activate")}}},[a("span",{staticClass:"link-text"},[t._v("Active Account")])])],1)])],1)},rn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"form-head"},[n("div",{staticClass:"logo"},[n("img",{staticClass:"header-image",attrs:{src:a("e93f")}})]),n("div",{staticClass:"welcome"},[n("p",{staticClass:"welcome-text"},[t._v("Welcome Back")])])])}],on={name:"MobileLogin",data:function(){return{phoneValue:"",phoneNum:"",preventNextIteration:!1}},methods:{focusOut:function(t){["Arrow","Backspace","Shift"].includes(t.key)?this.preventNextIteration=!0:this.preventNextIteration?this.preventNextIteration=!1:(this.phoneNum.length>0&&(this.phoneValue=this.phoneNum.replace(/-/g,"").match(/(\d{1,10})/g)[0]),this.phoneNum=this.phoneValue.replace(/(\d{1,3})(\d{1,3})(\d{1,4})/g,"$1-$2-$3"))},onMemberLogin:function(t){var e=this;t.preventDefault(),this.getMemberByPhoneNumFromDb((function(t){var a=t.data,n=t.token,i=a.member,s=a.family;i&&(e.$store.commit("setLoggedInMember",i),e.$store.commit("setLoggedInToken",n),s&&e.$store.commit("setLoggedInFamily",s),e.getInstitutionFromDb(i.institution_id,(function(t){e.$store.commit("setInstitution",t),e.$router.push("/mobile/home")})))}),(function(){e.$router.push("/mobile/activate")}))},getMemberByPhoneNumFromDb:function(t,e){var a=new XMLHttpRequest,n=_.a.API_LOCATION+"member/login";a.open("POST",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){var a=JSON.parse(this.responseText);if(4===this.readyState&&200===this.status){if(a.data&&null!=t)return void t(a)}else if(4===this.readyState){if(void 0!=a.message)return a.message.includes("Not Activated")&&null!=e?void e():void alert(a.message);alert(this.responseText)}};try{a.send(JSON.stringify({phone_num:this.phoneNum}))}catch(i){alert(i)}},getInstitutionFromDb:function(t,e){var a=new XMLHttpRequest,n=_.a.API_LOCATION+"institution/"+t;a.open("GET",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){if(0==this.responseText.length)return;var t=JSON.parse(this.responseText).data;t&&null!=e&&e(t)}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(i){alert(i)}}}},ln=on,cn=(a("c483"),Object(p["a"])(ln,sn,rn,!1,null,null,null)),dn=cn.exports,un=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"wrap"}},[t._m(0),a("b-form",{staticClass:"activate-form",on:{submit:t.onMemberActivate}},[a("div",{staticClass:"row"},[a("b-input-group",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.phoneNum,expression:"phoneNum"}],staticClass:"form-control form-rounded form-control-lg",attrs:{id:"phone-number-input",type:"text",placeholder:"Phone Number",required:""},domProps:{value:t.phoneNum},on:{keyup:t.focusOut,blur:t.focusOut,input:function(e){e.target.composing||(t.phoneNum=e.target.value)}}})]),a("p",{staticClass:"notes"},[t._v(" * Phone number is for authentication purpose only ")])],1),a("div",{staticClass:"row"},[a("b-input-group",[a("input",{directives:[{name:"model",rawName:"v-model",value:t.regCode,expression:"regCode"}],staticClass:"form-control form-rounded form-control-lg",attrs:{id:"reg-code-input",placeholder:"Registration Code",type:"text",required:""},domProps:{value:t.regCode},on:{input:function(e){e.target.composing||(t.regCode=e.target.value)}}})]),a("p",{staticClass:"notes"},[t._v(" * Please check your message for registration code ")])],1),a("div",{staticClass:"row",attrs:{id:"activate-button-div"}},[a("b-button",{staticClass:"activate-button",attrs:{pill:"",type:"submit",block:"",variant:"dark",size:"lg"}},[t._v(" Activate ")])],1),a("div",{staticClass:"link-to-pages"},[t._v(" Not a first time user? "),a("b-link",{on:{click:function(e){return t.$router.push("/mobile/login")}}},[a("span",{staticClass:"link-text"},[t._v("Log In")])])],1)])],1)},mn=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"activate-head"},[n("div",{staticClass:"activate-logo"},[n("img",{staticClass:"header-image",attrs:{src:a("e93f")}})]),n("div",{staticClass:"welcome"},[n("p",{staticClass:"welcome-text"},[t._v("First Time User")])])])}],hn={name:"MobileActivate",data:function(){return{phoneValue:"",phoneNum:"",regCode:"",preventNextIteration:!1}},methods:{focusOut:function(t){["Arrow","Backspace","Shift"].includes(t.key)?this.preventNextIteration=!0:this.preventNextIteration?this.preventNextIteration=!1:(this.phoneNum.length>0&&(this.phoneValue=this.phoneNum.replace(/-/g,"").match(/(\d{1,10})/g)[0]),this.phoneNum=this.phoneValue.replace(/(\d{1,3})(\d{1,3})(\d{1,4})/g,"$1-$2-$3"))},onMemberActivate:function(t){var e=this;t.preventDefault(),this.activateMemberInDb((function(){e.loginMember()}),(function(){alert("Activation Failed:( - Try Another Reg. Code")}))},loginMember:function(){var t=this;this.getMemberByPhoneNumFromDb((function(e){var a=e.data,n=e.token,i=a.member,s=a.family;i&&(t.$store.commit("setLoggedInMember",i),t.$store.commit("setLoggedInToken",n),s&&t.$store.commit("setLoggedInFamily",s),t.getInstitutionFromDb(i.institution_id,(function(e){t.$store.commit("setInstitution",e),t.$router.push("/mobile/home")})))}),(function(){t.$router.push("/mobile/activate")}))},activateMemberInDb:function(t,e){var a=new XMLHttpRequest,n=_.a.API_LOCATION+"member/activate";a.open("POST",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status)null!=t&&t();else if(4===this.readyState){var a=JSON.parse(this.responseText);if(void 0!=a.message)return a.message.includes("Try Another")&&null!=e?void e():void alert(a.message);alert(this.responseText)}};try{a.send(JSON.stringify({phone_num:this.phoneNum,reg_code:this.regCode}))}catch(i){alert(i)}},getMemberByPhoneNumFromDb:function(t,e){var a=new XMLHttpRequest,n=_.a.API_LOCATION+"member/login";a.open("POST",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var a=JSON.parse(this.responseText);if(a.data&&null!=t)return void t(a)}else if(4===this.readyState){var n=JSON.parse(this.responseText);if(void 0!=n.message)return n.message.includes("Not Activated")&&null!=e?void e():void alert(n.message);alert(this.responseText)}};try{a.send(JSON.stringify({phone_num:this.phoneNum}))}catch(i){alert(i)}},getInstitutionFromDb:function(t,e){var a=new XMLHttpRequest,n=_.a.API_LOCATION+"institution/"+t;a.open("GET",n,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){if(0==this.responseText.length)return;var t=JSON.parse(this.responseText).data;t&&null!=e&&e(t)}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(i){alert(i)}}}},pn=hn,fn=(a("0fbd"),Object(p["a"])(pn,un,mn,!1,null,null,null)),bn=fn.exports,gn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"background-image"},[a("router-view")],1)},vn=[],yn={name:"MobileContainer",data:function(){return{loggedInMember:null}},computed:{loggedInMemberName:function(){return null===this.loggedInMember?"":this.loggedInMember.first_name},showUser:function(){return null!=this.loggedInMember}},mounted:function(){this.loggedInMember=this.$store.state.loggedInMember},watch:{$route:function(t,e){this.loggedInMember=this.$store.state.loggedInMember}},methods:{onSignOut:function(){this.$store.commit("resetLoggedInFamily"),this.$store.commit("resetLoggedInMember"),this.$store.commit("resetLoggedInToken"),this.$store.commit("resetInstitution"),this.$router.push("/mobile/login")}}},_n=yn,Tn=(a("16d7"),Object(p["a"])(_n,gn,vn,!1,null,null,null)),Cn=Tn.exports,In=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"},attrs:{"align-h":"between"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Add Institution")])]),a("b-col",{attrs:{xl:"3",lg:"4"}},[a("b-button",{attrs:{variant:"info"},on:{click:function(e){return t.$router.push("./add-admin")}}},[t._v("Create Admin")])],1)],1),a("b-row",{staticClass:"ml-4 mr-4"},[a("b-col",{attrs:{lg:"4"}},[a("b-form",{on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Name","label-align":"left","label-for":"name-input"}},[a("b-form-input",{attrs:{id:"name-input",placeholder:"Enter name",required:""},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Address","label-align":"left","label-for":"address-input"}},[a("b-form-input",{attrs:{id:"address-input",placeholder:"Enter address",required:""},model:{value:t.form.address,callback:function(e){t.$set(t.form,"address",e)},expression:"form.address"}})],1),a("b-form-group",{attrs:{id:"input-group-3",label:"State","label-align":"left","label-for":"state-input"}},[a("b-form-input",{attrs:{id:"state-input",placeholder:"Enter state",required:""},model:{value:t.form.state,callback:function(e){t.$set(t.form,"state",e)},expression:"form.state"}})],1),a("b-form-group",{attrs:{id:"input-group-4",label:"Zip Code","label-align":"left","label-for":"zip-code-input"}},[a("b-form-input",{attrs:{id:"zip-code-input",placeholder:"Enter Zip Code",required:""},model:{value:t.form.zipCode,callback:function(e){t.$set(t.form,"zipCode",e)},expression:"form.zipCode"}})],1),a("b-form-group",{attrs:{id:"input-group-5",label:"Institution Type","label-align":"left","label-for":"inst-type-select"}},[a("b-form-select",{attrs:{id:"inst-type-select",options:t.instTypeOptions,required:""},model:{value:t.form.instType,callback:function(e){t.$set(t.form,"instType",e)},expression:"form.instType"}})],1),a("b-form-group",{attrs:{id:"input-group-6",label:"Workflow Type","label-align":"left","label-for":"workflow-type-select"}},[a("b-form-select",{attrs:{id:"workflow-type-select",options:t.workflowTypeOptions,required:""},model:{value:t.form.workflowType,callback:function(e){t.$set(t.form,"workflowType",e)},expression:"form.workflowType"}})],1),a("b-form-group",{attrs:{id:"input-group-7",label:"Member Type","label-align":"left","label-for":"member-type-select"}},[a("b-form-select",{attrs:{id:"member-type-select",options:t.memberTypeOptions,required:""},model:{value:t.form.memberType,callback:function(e){t.$set(t.form,"memberType",e)},expression:"form.memberType"}})],1),t.isMemberType?a("b-form-group",{attrs:{id:"input-group-8",label:"Require Survey When Checking-In","label-align":"left","label-for":"require-survey-checkbox"}},[a("b-form-checkbox",{attrs:{id:"require-survey-checkbox",required:""},model:{value:t.form.requireSurvey,callback:function(e){t.$set(t.form,"requireSurvey",e)},expression:"form.requireSurvey"}})],1):t._e(),t.isTagType?a("b-form-group",{attrs:{id:"input-group-9",label:"Identifier String","label-align":"left","label-for":"identifier-input"}},[a("b-form-input",{attrs:{id:"address-identifier",placeholder:"Enter Identifier",required:""},model:{value:t.form.identifier,callback:function(e){t.$set(t.form,"identifier",e)},expression:"form.identifier"}})],1):t._e(),t.isTagType?a("b-form-group",{attrs:{id:"input-group-10",label:"Regex Expression For Tag","label-align":"left","label-for":"regex-input"}},[a("b-form-input",{attrs:{id:"regex-input",placeholder:"Enter Regex"},model:{value:t.form.tagStringRegex,callback:function(e){t.$set(t.form,"tagStringRegex",e)},expression:"form.tagStringRegex"}})],1):t._e(),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Create")])],1)],1)],1)],1)},wn=[],xn=i["default"].extend({name:"AddInstitution",data:function(){return{form:{name:"",address:"",state:"",zipCode:"",instType:"",workflowType:"",memberType:"",identifier:"",tagStringRegex:"",requireSurvey:!1},instTypeOptions:[{value:la.a.INST_TYPE_SCHOOL,text:"School"},{value:la.a.INST_TYPE_HOSPITAL,text:"Hospital"},{value:la.a.INST_TYPE_CORPORATE,text:"Corporate"}],workflowTypeOptions:[{value:la.a.WORKFLOW_TYPE_CC,text:"Check-In & Check-Out"},{value:la.a.WORKFLOW_TYPE_CHECK_IN,text:"Check-In Only"}],memberTypeOptions:[{value:la.a.MEMBER_TYPE_GUARDIAN,text:"Guardian & Students/Patients"},{value:la.a.MEMBER_TYPE_STANDARD,text:"Patients/Employees/Members"},{value:la.a.MEMBER_TYPE_TAG,text:"Printed QRCode/Tags"}]}},computed:{isTagType:function(){return this.form.memberType===la.a.MEMBER_TYPE_TAG},isMemberType:function(){return this.form.memberType===la.a.MEMBER_TYPE_STANDARD||this.form.memberType===la.a.MEMBER_TYPE_GUARDIAN}},methods:{onSubmit:function(t){var e=this;t.preventDefault(),this.createInstitutionInDb((function(t){e.$bvToast.toast(t,{title:"DataBase Message",autoHideDelay:2e3})}))},createInstitutionInDb:function(t){var e=new XMLHttpRequest,a={name:this.form.name,address:this.form.address,state:this.form.state,zip_code:this.form.zipCode,type:this.form.instType,workflow_type:this.form.workflowType,member_type:this.form.memberType,identifier:this.form.identifier,require_survey:this.form.requireSurvey,custom_tag_string_regex:this.form.tagStringRegex},n=_.a.API_LOCATION+"institution";e.open("POST",n,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.setRequestHeader("Authorization","Bearer ".concat(_.a.SUPER_ADMIN_TOKEN)),e.onreadystatechange=function(){if(4===this.readyState&&201===this.status){var e=JSON.parse(this.responseText);void 0!=e.message&&null!=t&&t(e.message)}else 4===this.readyState&&alert(this.responseText)};try{e.send(JSON.stringify(a))}catch(i){alert(i)}}}}),kn=xn,Sn=Object(p["a"])(kn,In,wn,!1,null,null,null),An=Sn.exports,Rn=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"},attrs:{"align-h":"between"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Add Admin")])]),a("b-col",{attrs:{xl:"2",lg:"3"}},[a("b-button",{staticClass:"mb-2",attrs:{variant:"info"},on:{click:function(e){return t.$router.push("./add-institution")}}},[t._v("Create Institution")]),a("b-button",{attrs:{variant:"warning"},on:{click:function(e){return t.$router.push("./redirect")}}},[t._v("To CC-Portal")])],1)],1),a("b-row",{staticClass:"ml-4 mr-4"},[a("b-col",{attrs:{lg:"4"}},[a("b-form",{on:{submit:t.onSubmit}},[a("b-form-group",{attrs:{id:"input-group-2",label:"Affliated Instituttion","label-align":"left","label-for":"institution-select"}},[a("b-form-select",{attrs:{id:"institution-select",options:t.instOptions,required:""},model:{value:t.form.institutionId,callback:function(e){t.$set(t.form,"institutionId",e)},expression:"form.institutionId"}})],1),a("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-1",label:"Username","label-align":"left","label-for":"name-input"}},[a("b-form-input",{attrs:{id:"name-input",placeholder:"Enter Fras Username",required:""},model:{value:t.form.FrasUsername,callback:function(e){t.$set(t.form,"FrasUsername",e)},expression:"form.FrasUsername"}})],1),a("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-1",label:"Password","label-align":"left","label-for":"password-input"}},[a("b-form-input",{attrs:{id:"password-input",type:"password",placeholder:"Enter Password",required:""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1),a("b-form-group",{staticClass:"mb-4",attrs:{id:"input-group-1",label:"Confirm Password","label-align":"left","label-for":"password-input-confirm"}},[a("b-form-input",{attrs:{id:"password-input-confirm",type:"password",placeholder:"Confirm Password",required:""},model:{value:t.form.passwordConfirm,callback:function(e){t.$set(t.form,"passwordConfirm",e)},expression:"form.passwordConfirm"}})],1),a("b-button",{attrs:{type:"submit",variant:"primary"}},[t._v("Create")])],1)],1)],1)],1)},Mn=[],Fn={name:"AddAdmin",data:function(){return{form:{FrasUsername:"",password:"",passwordConfirm:"",institutionId:""},instOptions:[]}},mounted:function(){this.getInstitutionsFromDb()},methods:{mapInstToOptions:function(t){return{value:t._id,text:t.name}},onSubmit:function(t){var e=this;t.preventDefault(),this.form.password==this.form.passwordConfirm?this.createAdminInDb((function(t){e.$bvToast.toast(t,{title:"DataBase Message",autoHideDelay:2e3})})):alert("Password Confirmation Does NOT Match! Try Again.")},createAdminInDb:function(t){var e=new XMLHttpRequest,a={fras_username:this.form.FrasUsername,password:this.form.password,institution_id:this.form.institutionId},n=_.a.API_LOCATION+"admin/register";e.open("POST",n,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.setRequestHeader("Authorization","Bearer ".concat(_.a.SUPER_ADMIN_TOKEN)),e.onreadystatechange=function(){if(4===this.readyState&&201===this.status){var e=JSON.parse(this.responseText);void 0!=e.message&&null!=t&&t(e.message)}else 4===this.readyState&&alert(this.responseText)};try{e.send(JSON.stringify(a))}catch(i){alert(i)}},getInstitutionsFromDb:function(){var t=this,e=new XMLHttpRequest,a=_.a.API_LOCATION+"institutions";e.open("GET",a,!0),e.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.setRequestHeader("Authorization","Bearer ".concat(_.a.SUPER_ADMIN_TOKEN)),e.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText),a=e.data;a&&(t.instOptions=a.map((function(e){return t.mapInstToOptions(e)})))}else 4===this.readyState&&alert(this.responseText)};try{e.send()}catch(n){alert(n)}}}},Dn=Fn,On=Object(p["a"])(Dn,Rn,Mn,!1,null,null,null),Nn=On.exports,En=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("b-container",[a("b-row",{staticClass:"ml-2 mt-4",staticStyle:{"margin-bottom":"30px"},attrs:{"align-h":"between"}},[a("b-col",{attrs:{xl:"3",lg:"4"}},[a("h2",[t._v("Redirect to Check-InNOut Portal")])]),a("b-col",{attrs:{xl:"3",lg:"4"}},[a("b-button",{attrs:{variant:"info"},on:{click:function(e){return t.$router.push("./add-admin")}}},[t._v("Create Admin")])],1)],1),a("b-row",{staticClass:"ml-4 mr-4"},[a("b-col",{attrs:{lg:"4"}},[a("b-form-group",{attrs:{id:"input-group-1",label:"Select Institution","label-align":"left","label-for":"institution-select"}},[a("b-form-select",{staticClass:"mb-4",attrs:{id:"institution-select",options:t.instOptions},model:{value:t.instSelected,callback:function(e){t.instSelected=e},expression:"instSelected"}})],1),a("b-form-group",{attrs:{id:"input-group-2",label:"Select Admin","label-align":"left","label-for":"admin-select"}},[a("b-form-select",{staticClass:"mb-4",attrs:{id:"admin-select",options:t.adminOptions},model:{value:t.adminSelected,callback:function(e){t.adminSelected=e},expression:"adminSelected"}})],1),a("b-button",{attrs:{variant:"success",disabled:null===t.adminSelected},on:{click:t.onRedirectToCCPortal}},[t._v("To CC-Portal")])],1)],1)],1)},Pn=[],Ln=a("72bf"),jn={name:"RedirectCCPortal",data:function(){return{instSelected:null,adminSelected:null,instOptions:[],adminOptions:[]}},watch:{instSelected:function(){null===this.instSelected&&(this.adminOptions=[]),this.getAdminsFromDb()}},mounted:function(){this.getInstitutionsFromDb()},methods:{mapInstToOptions:function(t){return{value:t,text:t.name}},mapAdminToOptions:function(t){return{value:t,text:t.fras_username}},onRedirectToCCPortal:function(){var t=this;this.logInAdminByDb((function(e){var a=e.data,n=e.token;t.$store.commit("setInstitution",t.instSelected),t.$store.commit("setActiveUser",a),t.$store.commit("setLoggedInToken",n),t.$router.push("/portal/cc-records")}))},getInstitutionsFromDb:function(){var t=this,e=_.a.API_LOCATION+"institutions",a=new XMLHttpRequest;a.open("GET",e,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.setRequestHeader("Authorization","Bearer ".concat(_.a.SUPER_ADMIN_TOKEN)),a.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText),a=e.data;a&&(t.instOptions=a.map((function(e){return t.mapInstToOptions(e)})))}else 4===this.readyState&&alert(this.responseText)};try{a.send()}catch(n){alert(n)}},getAdminsFromDb:function(){var t=this,e={instID:this.instSelected._id},a=Ln.stringify(e),n=_.a.API_LOCATION+"admins?"+a,i=new XMLHttpRequest;i.open("GET",n,!0),i.setRequestHeader("Content-Type","application/json;charset=UTF-8"),i.setRequestHeader("Authorization","Bearer ".concat(_.a.SUPER_ADMIN_TOKEN)),i.onreadystatechange=function(){if(4===this.readyState&&200===this.status){var e=JSON.parse(this.responseText),a=e.data;a&&(t.adminOptions=a.map((function(e){return t.mapAdminToOptions(e)})))}else 4===this.readyState&&alert(this.responseText)};try{i.send()}catch(s){alert(s)}},logInAdminByDb:function(t){var e=_.a.API_LOCATION+"admin/login",a=new XMLHttpRequest;a.open("POST",e,!0),a.setRequestHeader("Content-Type","application/json;charset=UTF-8"),a.onreadystatechange=function(){var e=JSON.parse(this.responseText);if(4===this.readyState&&200===this.status){if(0==this.responseText.length)return;e.data&&null!=t&&t(e)}else 4===this.readyState&&alert(this.responseText)};try{a.send(JSON.stringify({fras_username:this.adminSelected.fras_username,password:this.adminSelected.password}))}catch(n){alert(n)}}}},Bn=jn,qn=Object(p["a"])(Bn,En,Pn,!1,null,null,null),Hn=qn.exports,$n=[{path:"/portal",name:"CCPortal",component:Y,children:[{path:"/portal/cc-records",component:Bt},{path:"/portal/members/dashboard",component:Zt,props:!0},{path:"/portal/tags/dashboard",component:Xt,props:!0},{path:"/portal/families/dashboard",component:re},{path:"/portal/wards/",component:fe},{path:"/portal/families/add-family",component:Te},{path:"/portal/families/info",component:Ee},{path:"/portal/admins",component:We},{path:"/portal/profile",component:Ve},{path:"/portal/settings",component:ia}]},{path:"/mobile",name:"Mobile",component:Cn,children:[{path:"/mobile/home",component:Ka},{path:"/mobile/activate",component:bn},{path:"/mobile/login",component:dn},{path:"/mobile/registration/:instID",component:nn,props:!0}]},{path:"/user-login",name:"CCPortalLogin",component:et},{path:"/super-admin/add-institution",name:"AddInstitution",component:An},{path:"/super-admin/add-admin",name:"AddAdmin",component:Nn},{path:"/super-admin/redirect",name:"RedirectCCPortal",component:Hn}],Un=$n;i["default"].config.productionTip=!1,i["default"].use(o["a"]),i["default"].use(l["a"]),i["default"].use(c["a"]),i["default"].use(s["a"]);var Wn=new c["a"]({routes:Un,mode:"history"}),zn=new r["a"]({storage:window.sessionStorage}),Xn=new s["a"].Store({state:{activeUser:null,institution:null,loggedInToken:"",loggedInFamily:null,loggedInMember:null,loadedFamilyWithMembers:null,wardIndexForCheckIn:-1},mutations:{setActiveUser:function(t,e){t.activeUser=e},setInstitution:function(t,e){t.institution=e},setLoggedInToken:function(t,e){t.loggedInToken=e},setLoadedFamilyWithMembers:function(t,e){t.loadedFamilyWithMembers=e},setLoggedInFamily:function(t,e){t.loggedInFamily=e},setLoggedInMember:function(t,e){t.loggedInMember=e},setWardIndexForCheckIn:function(t,e){t.wardIndexForCheckIn=e},resetInstitution:function(t){t.institution=null},resetLoggedInToken:function(t){t.loggedInToken=""},resetLoadedFamilyWithMembers:function(t){t.loadedFamilyWithMembers=null},resetLoggedInFamily:function(t){t.loggedInFamily=null},resetLoggedInMember:function(t){t.loggedInMember=null},resetWardIndexForCheckIn:function(t){t.wardIndexForCheckIn=-1}},plugins:[zn.plugin]});new i["default"]({router:Wn,store:Xn,render:function(t){return t(b)}}).$mount("#app")},"74f0":function(t,e,a){},"85ec":function(t,e,a){},"8c1b":function(t,e){t.exports={INST_TYPE_SCHOOL:"school",INST_TYPE_HOSPITAL:"hospital",INST_TYPE_CORPORATE:"corporate",WORKFLOW_TYPE_CC:"cc",WORKFLOW_TYPE_CHECK_IN:"checkin",MEMBER_TYPE_GUARDIAN:"guardian",MEMBER_TYPE_STANDARD:"standard",MEMBER_TYPE_TAG:"tag"}},"9a34":function(t,e,a){"use strict";a("28bf")},bed7:function(t,e,a){"use strict";a("180a")},c483:function(t,e,a){"use strict";a("fae4")},d9f2:function(t,e,a){"use strict";a("150f")},e93f:function(t,e,a){t.exports=a.p+"img/mAIRobotics_Logo_300px.6fad7bda.png"},f121:function(t,e){t.exports={API_LOCATION:"http://localhost:8000/api/",FRAS_USERNAME:"Fras User 4",SUPER_ADMIN_TOKEN:"disable_after_debug_done_sa"}},fae4:function(t,e,a){}});
//# sourceMappingURL=app.00e82aec.js.map